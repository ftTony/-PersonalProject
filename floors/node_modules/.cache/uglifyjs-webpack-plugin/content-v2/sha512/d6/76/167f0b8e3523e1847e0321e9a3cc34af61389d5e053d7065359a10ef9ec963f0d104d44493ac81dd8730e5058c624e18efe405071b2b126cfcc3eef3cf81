{"map":"{\"version\":3,\"sources\":[\"/Users/tony/Documents/notes/floors/app/js/game_controller.js\"],\"names\":[\"__webpack_require__\",\"window\",\"requestAnimationFrame\",\"webkitRequestAnimationFrame\",\"mozRequestAnimationFrame\",\"cb\",\"GameController\",\"this\",\"floorRate\",\"name\",\"rate\",\"fps\",\"speed\",\"maxSpeed\",\"peopleVerticalSpeed\",\"animation\",\"canvasWidth\",\"canvasHeight\",\"floorWidth\",\"floorHeight\",\"floorDeltaY\",\"floorScore\",\"blood\",\"$container\",\"$\",\"$canvas\",\"$scroller\",\"$people\",\"peopleRotateZ\",\"peopleRotateDelta\",\"peopleHeight\",\"peopleWidth\",\"_t\",\"_currentScrollerY\",\"_currentPeopleY\",\"_currentPeopleVertical\",\"_floorScrollerY\",\"_maxJumpDistance\",\"_frameIndex\",\"_v0\",\"checkFloorConfig\",\"prototype\",\"constructor\",\"Event\",\"on\",\"event\",\"fn\",\"indexOf\",\"gameover\",\"stop\",\"setTimeout\",\"hide\",\"show\",\"bind\",\"config\",\"i\",\"length\",\"RangeError\",\"getRandowFloor\",\"rangeArray\",\"dice\",\"Math\",\"random\",\"createFloorSpan\",\"_top\",\"_left\",\"floorElement\",\"_floorRateArray\",\"css\",\"top\",\"left\",\"width\",\"height\",\"start\"],\"mappings\":\"qGAAAA,EAAA,GAEAC,OAAOC,sBAAwBD,OAAOC,uBAAyBD,OAAOE,6BAA+BF,OAAOG,0BAA4B,SAAUC,GAC9IA,KAGJ,IAAIC,EAAiB,WACjBC,KAAKC,YACGC,KAAM,SACNC,KAAM,KAGND,KAAM,SACNC,KAAM,KAGND,KAAM,OACNC,KAAM,KAGND,KAAM,gBACNC,KAAM,KAGND,KAAM,iBACNC,KAAM,KAGND,KAAM,OACNC,KAAM,KAGdH,KAAKI,IAAM,GACXJ,KAAKK,MAAQ,GACbL,KAAKM,SAAW,IAChBN,KAAKO,oBAAsB,IAC3BP,KAAKQ,UAAY,KACjBR,KAAKS,YAAc,EACnBT,KAAKU,aAAe,EACpBV,KAAKW,WAAa,EAClBX,KAAKY,YAAc,EACnBZ,KAAKa,YAAc,GACnBb,KAAKc,WAAa,EAClBd,KAAKe,MAAQ,GACbf,KAAKgB,WAAaC,EAAE,cACpBjB,KAAKkB,QAAUD,EAAE,gBACjBjB,KAAKmB,UAAYF,EAAE,aACnBjB,KAAKoB,QAAUH,EAAE,WACjBjB,KAAKqB,cAAgB,EACrBrB,KAAKsB,kBAAoB,GACzBtB,KAAKuB,aAAe,EACpBvB,KAAKwB,YAAc,EACnBxB,KAAKyB,GAAK,EACVzB,KAAK0B,kBAAoB,EACzB1B,KAAK2B,gBAAkB,GACvB3B,KAAK4B,uBAAyB,EAC9B5B,KAAK6B,gBAAkB,IACvB7B,KAAK8B,iBAAmB,EACxB9B,KAAK+B,YAAc,EACnB/B,KAAKgC,IAAM,EACXhC,KAAKiC,oBAGTlC,EAAemC,WACXC,YAAapC,EACbqC,OACI,WACA,QACA,QACA,OACA,eAEJC,GAAI,SAAUC,EAAOC,IACkB,IAA/BvC,KAAKoC,MAAMI,QAAQF,IACvBtC,KAAKgB,WAAWqB,GAAGC,EAAOC,IAK9BE,SAAU,WACNzC,KAAK0C,OACLC,WAAW,WACP1B,EAAE,YAAY2B,OACd3B,EAAE,cAAc4B,QAClBC,KAAK9C,MAAO,MAElBiC,iBAAkB,WAKd,IAJA,IAEIc,EAAS/C,KAAKC,UAET+C,EAAI,EAAGA,EAAID,EAAOE,OAAQD,KAI/B,MAAM,IAAIE,WAAW,qBAI7BC,eAAgB,SAAUC,GAEtB,IADA,IAAIC,EAAuB,IAAhBC,KAAKC,SACPP,EAAI,EAAGA,EAAII,EAAWH,OAAS,EAAGD,IACvC,GAAIK,GAAQD,EAAWJ,IAAMK,EAAOD,EAAWJ,EAAI,GAC/C,OAAOhD,KAAKC,UAAU+C,IAIlCQ,gBAAiB,WACb,IAAIC,EAAOzD,KAAK6B,iBAAmB7B,KAAKa,YACpC6C,EAAQJ,KAAKC,UAAYvD,KAAKS,YAAcT,KAAKW,YAEjDgD,EAAe,mBADD3D,KAAKmD,eAAenD,KAAK4D,iBACS1D,KAAO,SAE3De,EAAE0C,GAAcE,KACZC,IAAKL,EACLM,KAAML,EACNM,MAAOhE,KAAKW,WACZsD,OAAQjE,KAAKY,eAGrBsD,MAAO,wBAKInE\",\"sourcesContent\":[\"import './zepto-touch';\\n\\nwindow.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (cb) {\\n    cb();\\n}\\n\\nvar GameController = function () {\\n    this.floorRate = [{\\n            name: 'normal',\\n            rate: 15,\\n        },\\n        {\\n            name: 'spring',\\n            rate: 15\\n        },\\n        {\\n            name: 'weak',\\n            rate: 15\\n        },\\n        {\\n            name: 'scroller-left',\\n            rate: 10\\n        },\\n        {\\n            name: 'scroller-right',\\n            rate: 10\\n        },\\n        {\\n            name: 'nail',\\n            rate: 35\\n        },\\n    ];\\n    this.fps = 60; //刷新频率\\n    this.speed = 50; //卷轴初始速度\\n    this.maxSpeed = 350; //卷轴最大速度\\n    this.peopleVerticalSpeed = 200; //人物横向移动速度\\n    this.animation = null;\\n    this.canvasWidth = 0; //画布宽度\\n    this.canvasHeight = 0; //画面高度\\n    this.floorWidth = 0; //楼层宽度\\n    this.floorHeight = 0; //楼层高度\\n    this.floorDeltaY = 50;\\n    this.floorScore = 1;\\n    this.blood = 12; //人物血量\\n    this.$container = $('.container');\\n    this.$canvas = $('.game-canvas');\\n    this.$scroller = $('.scroller');\\n    this.$people = $('.people');\\n    this.peopleRotateZ = 0;\\n    this.peopleRotateDelta = 25; //小球滚动角度\\n    this.peopleHeight = 0;\\n    this.peopleWidth = 0;\\n    this._t = 0;\\n    this._currentScrollerY = 0;\\n    this._currentPeopleY = 20;\\n    this._currentPeopleVertical = 0;\\n    this._floorScrollerY = 200;\\n    this._maxJumpDistance = 0;\\n    this._frameIndex = 0;\\n    this._v0 = 0;\\n    this.checkFloorConfig();\\n};\\n\\nGameController.prototype = {\\n    constructor: GameController,\\n    Event: [\\n        'gameover',\\n        'start',\\n        'rerun',\\n        'stop',\\n        'scoreupdate'\\n    ],\\n    on: function (event, fn) {\\n        if (this.Event.indexOf(event) === -1) return;\\n        this.$container.on(event, fn);\\n    },\\n    /**\\n     * 游戏结束\\n     */\\n    gameover: function () {\\n        this.stop();\\n        setTimeout(function () {\\n            $('#game-ct').hide();\\n            $('.game-over').show();\\n        }.bind(this), 200);\\n    },\\n    checkFloorConfig: function () {\\n        var rangeArray = [0];\\n        var totalRate = 0;\\n        var config = this.floorRate;\\n\\n        for (var i = 0; i < config.length; i++) {\\n\\n        }\\n        if (totalRate !== 100) {\\n            throw new RangeError('rate 加起来务必等于100!');\\n        }\\n        this._floorRateArray = rangeArray;\\n    },\\n    getRandowFloor: function (rangeArray) {\\n        var dice = Math.random() * 100;\\n        for (var i = 0; i < rangeArray.length - 1; i++) {\\n            if (dice >= rangeArray[i] && dice < rangeArray[i + 1]) {\\n                return this.floorRate[i];\\n            }\\n        }\\n    },\\n    createFloorSpan: function () {\\n        var _top = this._floorScrollerY += this.floorDeltaY,\\n            _left = Math.random() * (this.canvasWidth - this.floorWidth);\\n        var floorConfig = this.getRandowFloor(this._floorRateArray);\\n        var floorElement = '<i class=\\\"floor ' + floorConfig.name + '\\\"></i>';\\n\\n        $(floorElement).css({\\n            top: _top,\\n            left: _left,\\n            width: this.floorWidth,\\n            height: this.floorHeight\\n        });\\n    },\\n    start: function () {\\n\\n    },\\n\\n}\\nexport default GameController;\"]}","code":"webpackHotUpdate(0,{10:function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),o(9),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){t()};var i=function(){this.floorRate=[{name:\"normal\",rate:15},{name:\"spring\",rate:15},{name:\"weak\",rate:15},{name:\"scroller-left\",rate:10},{name:\"scroller-right\",rate:10},{name:\"nail\",rate:35}],this.fps=60,this.speed=50,this.maxSpeed=350,this.peopleVerticalSpeed=200,this.animation=null,this.canvasWidth=0,this.canvasHeight=0,this.floorWidth=0,this.floorHeight=0,this.floorDeltaY=50,this.floorScore=1,this.blood=12,this.$container=$(\".container\"),this.$canvas=$(\".game-canvas\"),this.$scroller=$(\".scroller\"),this.$people=$(\".people\"),this.peopleRotateZ=0,this.peopleRotateDelta=25,this.peopleHeight=0,this.peopleWidth=0,this._t=0,this._currentScrollerY=0,this._currentPeopleY=20,this._currentPeopleVertical=0,this._floorScrollerY=200,this._maxJumpDistance=0,this._frameIndex=0,this._v0=0,this.checkFloorConfig()};i.prototype={constructor:i,Event:[\"gameover\",\"start\",\"rerun\",\"stop\",\"scoreupdate\"],on:function(t,e){-1!==this.Event.indexOf(t)&&this.$container.on(t,e)},gameover:function(){this.stop(),setTimeout(function(){$(\"#game-ct\").hide(),$(\".game-over\").show()}.bind(this),200)},checkFloorConfig:function(){for(var t=this.floorRate,e=0;e<t.length;e++);throw new RangeError(\"rate 加起来务必等于100!\")},getRandowFloor:function(t){for(var e=100*Math.random(),o=0;o<t.length-1;o++)if(e>=t[o]&&e<t[o+1])return this.floorRate[o]},createFloorSpan:function(){var t=this._floorScrollerY+=this.floorDeltaY,e=Math.random()*(this.canvasWidth-this.floorWidth),o='<i class=\"floor '+this.getRandowFloor(this._floorRateArray).name+'\"></i>';$(o).css({top:t,left:e,width:this.floorWidth,height:this.floorHeight})},start:function(){}},e.default=i}});","extractedComments":[]}
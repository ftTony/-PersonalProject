{"map":"{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}","code":"webpackHotUpdate(0,{10:function(module,exports,__webpack_require__){\"use strict\";eval(\"\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n    value: true\\n});\\n\\n__webpack_require__(9);\\n\\nwindow.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (cb) {\\n    cb();\\n};\\n\\nvar GameController = function GameController() {\\n    this.floorRate = [{\\n        name: 'normal',\\n        rate: 15\\n    }, {\\n        name: 'spring',\\n        rate: 15\\n    }, {\\n        name: 'weak',\\n        rate: 15\\n    }, {\\n        name: 'scroller-left',\\n        rate: 10\\n    }, {\\n        name: 'scroller-right',\\n        rate: 10\\n    }, {\\n        name: 'nail',\\n        rate: 35\\n    }];\\n    this.fps = 60; //刷新频率\\n    this.speed = 50; //卷轴初始速度\\n    this.maxSpeed = 350; //卷轴最大速度\\n    this.gravity = 1000; //重力加速度px每秒平方\\n    this.peopleVerticalSpeed = 200; //人物横向移动速度\\n    this.animation = null;\\n    this.canvasWidth = 0; //画布宽度\\n    this.canvasHeight = 0; //画面高度\\n    this.floorWidth = 0; //楼层宽度\\n    this.floorHeight = 0; //楼层高度\\n    this.floorDeltaY = 50;\\n    this.floorScore = 1;\\n    this.blood = 12; //人物血量\\n    this.$container = $('.container');\\n    this.$canvas = $('.game-canvas');\\n    this.$scroller = $('.scroller');\\n    this.$people = $('.people');\\n    this.peopleRotateZ = 0;\\n    this.peopleRotateDelta = 25; //小球滚动角度\\n    this.peopleHeight = 0;\\n    this.peopleWidth = 0;\\n    this._t = 0;\\n    this._currentScrollerY = 0;\\n    this._currentPeopleY = 20;\\n    this._currentPeopleVertical = 0;\\n    this._floorScrollerY = 200;\\n    this._maxJumpDistance = 20;\\n    this._frameIndex = 0;\\n    this._v0 = 0;\\n    this.checkFloorConfig();\\n};\\n\\nGameController.prototype = {\\n    constructor: GameController,\\n    Event: ['gameover', 'start', 'rerun', 'stop', 'scoreupdate'],\\n    on: function on(event, fn) {\\n        if (this.Event.indexOf(event) === -1) return;\\n        this.$container.on(event, fn);\\n    },\\n    /**\\n     * 游戏结束\\n     */\\n    gameover: function gameover() {\\n        this.stop();\\n        setTimeout(function () {\\n            this.$container.trigger('gameover');\\n            $('#game-ct').hide();\\n            $('.game-over').show();\\n        }.bind(this), 200);\\n    },\\n    checkFloorConfig: function checkFloorConfig() {\\n        var rangeArray = [0];\\n        var totalRate = 0;\\n        var config = this.floorRate;\\n\\n        for (var i = 0; i < config.length; i++) {\\n            var _rate = config[i].rate;\\n            if (typeof _rate !== 'number') {\\n                throw new TypeError('rate type error');\\n            }\\n            totalRate += _rate;\\n            rangeArray.push(totalRate);\\n        }\\n        if (totalRate !== 100) {\\n            throw new RangeError('rate 加起来务必等于100!');\\n        }\\n        this._floorRateArray = rangeArray;\\n    },\\n    getRandowFloor: function getRandowFloor(rangeArray) {\\n        var dice = Math.random() * 100;\\n        for (var i = 0; i < rangeArray.length - 1; i++) {\\n            if (dice >= rangeArray[i] && dice < rangeArray[i + 1]) {\\n                return this.floorRate[i];\\n            }\\n        }\\n    },\\n    /**\\n     * 创建楼层\\n     */\\n    createFloorSpan: function createFloorSpan() {\\n        var _top = this._floorScrollerY += this.floorDeltaY,\\n            _left = Math.random() * (this.canvasWidth - this.floorWidth);\\n        var floorConfig = this.getRandowFloor(this._floorRateArray);\\n        var floorElement = '<i class=\\\"floor ' + floorConfig.name + '\\\"></i>';\\n\\n        $(floorElement).css({\\n            top: _top,\\n            left: _left,\\n            width: this.floorWidth,\\n            height: this.floorHeight\\n        }).appendTo(this.$scroller);\\n    },\\n    /**\\n     * 移除楼层\\n     */\\n    removeFloorSapn: function removeFloorSapn() {\\n        $('.floor').eq(0).remove();\\n        this.floorScore++;\\n        this.updateScore();\\n    },\\n    /**\\n     * 更改血\\n     */\\n    updateBlood: function updateBlood() {\\n        var $bloodEle = $('.blood i');\\n        for (var i = 0; i < $bloodEle.length; i++) {\\n            if (i < this.blood) {\\n                $bloodEle.eq(i).removeClass('lose');\\n            } else {\\n                $bloodEle.eq(i).addClass('lose');\\n            }\\n        }\\n    },\\n    /**\\n     * 修改分数\\n     */\\n    updateScore: function updateScore() {\\n        this.$container.trigger('scoreupdate');\\n        $('.text-score').text(this.floorScore);\\n    },\\n    /**\\n     * 失分数\\n     */\\n    loseBlood: function loseBlood() {\\n        if (this.__onFloor) return;\\n        this.blood -= 4;\\n        //人变红\\n        this.$people.addClass('danger');\\n        setTimeout(function () {\\n            this.$people.removeClass('danger');\\n        }.bind(this), 1000);\\n\\n        //背影闪烁\\n        $('#game-ct').addClass('danger');\\n        setTimeout(function () {\\n            $('#game-ct').removeClass('danger');\\n        }, 100);\\n\\n        if (this.blood <= 0) {\\n            this.blood = 0;\\n            this.updateBlood();\\n            this.gameover();\\n            return;\\n        }\\n        this.updateBlood();\\n    },\\n    addBlood: function addBlood() {\\n        //当人物在平台上时，或者血量大于12，不重复加血\\n        if (this.__onFloor || this.blood >= 12) return;\\n        this.blood += 1;\\n        this.updateBlood();\\n    },\\n    floorNormal: function floorNormal() {\\n        this.addBlood();\\n    },\\n    floorNail: function floorNail() {\\n        this.loseBlood();\\n    },\\n    floorWeak: function floorWeak($floorEle) {\\n        this.addBlood();\\n        setTimeout(function () {\\n            $floorEle.addClass('over');\\n            $floorEle[0].cross = true;\\n        }, 200);\\n    },\\n    floorScroll: function floorScroll(direction) {\\n        this.addBlood();\\n        this.__floorScrollDirection = direction;\\n    },\\n    floorScrollEnd: function floorScrollEnd() {\\n        this.__floorScrollDirection = null;\\n    },\\n    floorSpring: function floorSpring($floorEle) {\\n        this.__$currentJumpFloor = $floorEle;\\n        this.jumpStart();\\n        this.addBlood();\\n    },\\n    jumpStart: function jumpStart() {\\n        this.__jumpMode = true;\\n        this.__$currentJumpFloor.addClass('up');\\n        setTimeout(function () {\\n            this.__$currentJumpFloor.removeClass('up');\\n        }.bind(this), 200);\\n    },\\n    jumpEnd: function jumpEnd(hitTop) {\\n        if (!this.__jumpMode) {\\n            return;\\n        }\\n        if (hitTop) {\\n            this.__$currentJumpFloor[0].cross = true;\\n        }\\n        //重置跳跃高度\\n        this._currentJumpDistance = 0;\\n        //解除跳跃\\n        this.__jumpMode = false;\\n    },\\n    people: function people(fps) {\\n        //每帧消耗时间 ms\\n        var dt = 1 / fps;\\n        //人物纵向每帧移动距离 \\n        var _deltaPeopleY = this._v0 * dt + this.gravity * dt * dt / 2;\\n        //更新时间 t=t+dt;\\n        this._t += dt;\\n        // 更新速度 v=at\\n        this._v0 = this.gravity * this._t;\\n        //卷轴纵向每帧移动距离\\n        var _deltaY = this.speed / fps;\\n        //人物横向每帧移动距离\\n        var _deltaPeopleVertical = this.peopleVerticalSpeed / fps;\\n        // 缓存floor\\n        var $floor = $('.floor');\\n        //缓存offset\\n        var peopleOffset = this.$people.offset();\\n\\n        //人物掉落屏幕下方，游戏结束\\n        if (peopleOffset.top > this.canvasHeight) {\\n            this.gameover();\\n            return;\\n        }\\n        // 碰撞检测\\n        for (var i = 0; i < $floor.length; i++) {\\n            //缓存offset\\n            var floorOffset = $floor.eq(i).offset();\\n            //人物与楼梯纵向距离\\n            var distanceGap = Math.abs(peopleOffset.top + this.peopleHeight - floorOffset.top);\\n            // 当人物撞到顶部，掉血+掉落+打断跳跃\\n            if (peopleOffset.top <= _deltaPeopleY + _deltaY) {\\n                this._t = 0;\\n                this.__onFloor = false;\\n                this.jumpEnd(true);\\n                this.loseBlood();\\n                break;\\n            }\\n            // 跳跃模式不进入检测\\n            if (!this.__jumpMode &&\\n            //元素不可直接穿过\\n            !$floor.eq(i)[0].cross &&\\n            // 人物与楼梯纵向距离在一帧移动距离之内\\n            distanceGap <= _deltaPeopleY + _deltaY &&\\n            // 人物横向距离不超过楼梯最左\\n            peopleOffset.left > floorOffset.left - this.peopleWidth &&\\n            //人物横向距离不走过楼梯最右\\n            peopleOffset.left < floorOffset.left + this.floorWidth) {\\n                // 人物与楼梯偏差修正\\n                this._currentPeopleY = floorOffset.top - this.peopleHeight;\\n                // 施加各类楼梯特殊属性\\n                if ($floor.eq(i).hasClass('normal')) {\\n                    this.floorNormal();\\n                }\\n                if ($floor.eq(i).hasClass('nail')) {\\n                    this.floorNail();\\n                }\\n                if ($floor.eq(i).hasClass('spring')) {\\n                    this.floorSpring($floor.eq(i));\\n                }\\n                if ($floor.eq(i).hasClass('weak')) {\\n                    this.floorWeak($floor.eq(i));\\n                }\\n                if ($floor.eq(i).hasClass('scroll-left')) {\\n                    this.floorScroll('left');\\n                }\\n                if ($floor.eq(i).hasClass('scroll-right')) {\\n                    this.floorScroll('right');\\n                }\\n                this._t = 0;\\n                this.__onFloor = true;\\n                break;\\n            }\\n            //当循环执行完毕，仍然没有发现碰撞，则表明人物不在平台上\\n            if (i === $floor.length - 1) {\\n                this.__onFloor = false;\\n            }\\n        }\\n\\n        //人物向上跳起\\n        if (this.__jumpMode) {\\n            if (this._currentJumpDistance >= this._maxJumpDistance) {\\n                this.jumpEnd();\\n            } else {\\n                this._currentJumpDistance += _deltaPeopleY;\\n                // 向上跳起效果要额外加上_deltaY，以匹配卷轴运动状态\\n                this._currentPeopleY -= _deltaPeopleY + _deltaY;\\n            }\\n        }\\n\\n        // 人物向下坠落+取消楼梯左右加速状态\\n        if (!this.__onFloor && !this.__jumpMode) {\\n            this.floorScrollEnd();\\n            this._currentPeopleY += _deltaPeopleY;\\n        }\\n\\n        // 横向运动预处理\\n        var __temp_deltaPeopleVertical = _deltaPeopleVertical;\\n        //处理人物向左运动\\n        if (this._peopleGoLeft) {\\n            if (this.__floorScrollDirection === 'left') {\\n                __temp_deltaPeopleVertical *= 1.5;\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                __temp_deltaPeopleVertical *= 1.5;\\n            }\\n            if (this._currentPeopleVertical > 0) {\\n                this._currentPeopleVertical -= __temp_deltaPeopleVertical;\\n            }\\n        }\\n        // 处理人物向右运动\\n        if (this._peopleGoRight) {\\n            if (this.__floorScrollDirection === 'left') {\\n                __temp_deltaPeopleVertical *= 0.5;\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                __temp_deltaPeopleVertical *= 0.5;\\n            }\\n            if (this._currentPeopleVertical < this.canvasWidth - this.peopleWidth) {\\n                this._currentPeopleVertical += __temp_deltaPeopleVertical;\\n            }\\n        }\\n        // 处理人物在滚动楼梯上的自动运动\\n        if (!this._peopleGoRight && !this._peopleGoLeft) {\\n            __temp_deltaPeopleVertical *= 0.5;\\n            if (this.__floorScrollDirection === 'left') {\\n                if (this._currentPeopleVertical > 0) {\\n                    this._currentPeopleVertical -= __temp_deltaPeopleVertical;\\n                }\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                if (this._currentPeopleVertical < this.canvasWidth - this.peopleWidth) {\\n                    this._currentPeopleVertical += __temp_deltaPeopleVertical;\\n                }\\n            }\\n        }\\n        //更新人视图\\n        this.peopleUpdateView();\\n    },\\n    //更新卷轴位置\\n    floorUpdateView: function floorUpdateView() {\\n        if (Modernizr.csstransforms3d) {\\n            this.$scroller.css({\\n                '-webkit-transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)',\\n                '-ms-transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)',\\n                'transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)'\\n            });\\n        } else if (Modernizr.csstransforms) {\\n            this.$scroller.css({\\n                '-webkit-transform': 'translateY(' + this._currentScrollerY + 'px)',\\n                '-ms-transform': 'translateY(' + this._currentScrollerY + 'px)',\\n                'transform': 'translateY(' + this._currentScrollerY + 'px)'\\n            });\\n        } else {\\n            this.$scroller.css({\\n                'top': this._currentScrollerY + 'px'\\n            });\\n        }\\n    },\\n    peopleUpdateView: function peopleUpdateView() {\\n        if (this.__onFloor) {\\n            if (this._peopleGoLeft) {\\n                this.peopleRotateZ -= this.peopleRotateDelta;\\n            }\\n            if (this._peopleGoRight) {\\n                this.peopleRotateZ += this.peopleRotateDelta;\\n            }\\n        }\\n        if (Modernizr.csstransforms3d) {\\n            this.$people.css({\\n                '-webkit-transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)',\\n                '-ms-transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)',\\n                'transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)'\\n            });\\n        } else if (Modernizr.csstransforms) {\\n            this.$people.css({\\n                '-webkit-transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)',\\n                '-ms-transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)',\\n                'transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)'\\n            });\\n        } else {\\n            this.$people.css({\\n                'left': this._currentPeopleVertical + 'px',\\n                'top': this._currentPeopleY + 'px'\\n            });\\n        }\\n    },\\n    peopleUserController: function peopleUserController() {\\n        var _this = this;\\n        $(window).keydown(function (ev) {\\n            if (ev.key === 'ArrowRight') {\\n                _this._peopleGoRight = true;\\n                _this._peopleGoLeft = false;\\n                return;\\n            }\\n            if (ev.key === 'ArrowLeft') {\\n                _this._peopleGoRight = false;\\n                _this._peopleGoLeft = true;\\n            }\\n        }).keyup(function (ev) {\\n            if (ev.key === 'ArrowRight') {\\n                _this._peopleGoRight = false;\\n                return;\\n            }\\n            if (ev.key === 'ArrowLeft') {\\n                _this._peopleGoLeft = false;\\n                return;\\n            }\\n        });\\n\\n        $('.controller .left-ct').on('touchstart', function (ev) {\\n            _this._peopleGoRight = false;\\n            _this._peopleGoLeft = true;\\n            return false;\\n        }).on('tounchend', function (ev) {\\n            _this._peopleGoLeft = false;\\n        });\\n\\n        $('.controller .right-ct').on('touchstart', function (ev) {\\n            _this._peopleGoRight = true;\\n            _this._peopleGoLeft = false;\\n            return false;\\n        }).on('touchend', function (ev) {\\n            _this._peopleGoRight = false;\\n        });\\n    },\\n    core: function core(fps) {\\n        var _this = this,\\n            _deltaY = this.speed / fps,\\n            //卷轴纵向每帧移动距离\\n        $floor = $('.floor');\\n\\n        //计算卷轴位置\\n        this._currentScrollerY -= _deltaY;\\n\\n        //当卷轴超出一定长度之后，进行位置reset，缩减长度，防止Crash现象\\n        if (this._currentScrollerY <= -this.canvasHeight * 2) {\\n            //将卷轴滚动高度减小一屏\\n            this._currentScrollerY += this.canvasHeight;\\n            //将楼梯偏移高度减少一屏\\n            this._floorScrollerY -= this.canvasHeight;\\n            //重置再有楼梯位置\\n            for (var i = 0; i < $floor.length; i++) {\\n                $floor.eq(i).css({\\n                    top: parseInt($('.floor').eq(i).css('top')) - this.canvasHeight\\n                });\\n            }\\n        }\\n        //更新卷轴位置\\n        this.floorUpdateView();\\n\\n        //每个台阶移出视野则清除台阶，并且在底部增加一个新的台阶\\n        if ($floor.eq(0).offset().top <= -20) {\\n            this.createFloorSpan();\\n            this.removeFloorSapn();\\n        }\\n\\n        //调用人物渲染\\n        this.people(fps);\\n        //起来越high\\n        if (this.speed <= this.maxSpeed) {\\n            this.speed += 0.1;\\n        }\\n    },\\n    run: function run(fps) {\\n        if (this.animation) {\\n            console.error('Animation has aready in process,please do not run again!');\\n            return;\\n        }\\n\\n        this._fps = fps = fps || 60;\\n        var looptime = 1000 / fps;\\n        var _this = this;\\n\\n        var runAnimation = function runAnimation() {\\n            return setTimeout(function () {\\n                window.requestAnimationFrame(function () {\\n                    _this.core(fps);\\n                });\\n                _this.animation = runAnimation();\\n            }, looptime);\\n        };\\n        return this.animation = runAnimation();\\n    },\\n    stop: function stop() {\\n        clearTimeout(this.animation); //暂停动画\\n        this.animation = undefined;\\n        this.$container.trigger('stop');\\n    },\\n    reRun: function reRun() {\\n        this.$container.trigger('rerun');\\n        //重置参数\\n        $.extend(this, this.__paramBackup);\\n        //删除掉再有楼梯\\n        $('.floor').remove();\\n        //重新初始化\\n        this.start();\\n    },\\n    backup: function backup() {\\n        // 备份寝设置参数，用于游戏reset\\n        this.__paramBackup = {};\\n        for (var i in this) {\\n            if (typeof this[i] === 'number' || typeof this[i] === 'string') {\\n                this.__paramBackup[i] = this[i];\\n            }\\n        }\\n    },\\n    start: function start() {\\n        var _this = this,\\n            floorLoop = 0;\\n        this.$container.trigger('start');\\n        this.canvasWidth = this.$canvas.width();\\n        this.canvasHeight = this.$canvas.height();\\n        this.floorDeltaY = this.canvasHeight / 11;\\n        this.floorWidth = this.canvasWidth / 5;\\n        this.floorHeight = this.floorWidth / 9;\\n        this.peopleHeight = parseInt(this.$people.css('height'));\\n        this.peopleWidth = parseInt(this.$people.css('width'));\\n\\n        this._currentPeopleVertical = this.canvasWidth / 2 + this.peopleWidth / 2;\\n        this.backup();\\n        //初始化台阶\\n        while (floorLoop++ < 13) {\\n            this.createFloorSpan();\\n        }\\n        //初始化任务控制\\n        this.peopleUserController();\\n        //首次更新人物视图\\n        this.peopleUpdateView();\\n        //首次更新人物血量\\n        this.updateBlood();\\n        //首次更新楼层数\\n        this.updateScore();\\n        //以每秒60帧执行游戏动画\\n        this.run(this.fps);\\n    }\\n\\n};\\nexports.default = GameController;//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvZ2FtZV9jb250cm9sbGVyLmpzPzAyNTMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnJlcXVpcmUoJy4vemVwdG8tdG91Y2gnKTtcblxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYikge1xuICAgIGNiKCk7XG59O1xuXG52YXIgR2FtZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiBHYW1lQ29udHJvbGxlcigpIHtcbiAgICB0aGlzLmZsb29yUmF0ZSA9IFt7XG4gICAgICAgIG5hbWU6ICdub3JtYWwnLFxuICAgICAgICByYXRlOiAxNVxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3NwcmluZycsXG4gICAgICAgIHJhdGU6IDE1XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnd2VhaycsXG4gICAgICAgIHJhdGU6IDE1XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnc2Nyb2xsZXItbGVmdCcsXG4gICAgICAgIHJhdGU6IDEwXG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnc2Nyb2xsZXItcmlnaHQnLFxuICAgICAgICByYXRlOiAxMFxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ25haWwnLFxuICAgICAgICByYXRlOiAzNVxuICAgIH1dO1xuICAgIHRoaXMuZnBzID0gNjA7IC8v5Yi35paw6aKR546HXG4gICAgdGhpcy5zcGVlZCA9IDUwOyAvL+WNt+i9tOWIneWni+mAn+W6plxuICAgIHRoaXMubWF4U3BlZWQgPSAzNTA7IC8v5Y236L205pyA5aSn6YCf5bqmXG4gICAgdGhpcy5ncmF2aXR5ID0gMTAwMDsgLy/ph43lipvliqDpgJ/luqZweOavj+enkuW5s+aWuVxuICAgIHRoaXMucGVvcGxlVmVydGljYWxTcGVlZCA9IDIwMDsgLy/kurrnianmqKrlkJHnp7vliqjpgJ/luqZcbiAgICB0aGlzLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgdGhpcy5jYW52YXNXaWR0aCA9IDA7IC8v55S75biD5a695bqmXG4gICAgdGhpcy5jYW52YXNIZWlnaHQgPSAwOyAvL+eUu+mdoumrmOW6plxuICAgIHRoaXMuZmxvb3JXaWR0aCA9IDA7IC8v5qW85bGC5a695bqmXG4gICAgdGhpcy5mbG9vckhlaWdodCA9IDA7IC8v5qW85bGC6auY5bqmXG4gICAgdGhpcy5mbG9vckRlbHRhWSA9IDUwO1xuICAgIHRoaXMuZmxvb3JTY29yZSA9IDE7XG4gICAgdGhpcy5ibG9vZCA9IDEyOyAvL+S6uueJqeihgOmHj1xuICAgIHRoaXMuJGNvbnRhaW5lciA9ICQoJy5jb250YWluZXInKTtcbiAgICB0aGlzLiRjYW52YXMgPSAkKCcuZ2FtZS1jYW52YXMnKTtcbiAgICB0aGlzLiRzY3JvbGxlciA9ICQoJy5zY3JvbGxlcicpO1xuICAgIHRoaXMuJHBlb3BsZSA9ICQoJy5wZW9wbGUnKTtcbiAgICB0aGlzLnBlb3BsZVJvdGF0ZVogPSAwO1xuICAgIHRoaXMucGVvcGxlUm90YXRlRGVsdGEgPSAyNTsgLy/lsI/nkIPmu5rliqjop5LluqZcbiAgICB0aGlzLnBlb3BsZUhlaWdodCA9IDA7XG4gICAgdGhpcy5wZW9wbGVXaWR0aCA9IDA7XG4gICAgdGhpcy5fdCA9IDA7XG4gICAgdGhpcy5fY3VycmVudFNjcm9sbGVyWSA9IDA7XG4gICAgdGhpcy5fY3VycmVudFBlb3BsZVkgPSAyMDtcbiAgICB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgPSAwO1xuICAgIHRoaXMuX2Zsb29yU2Nyb2xsZXJZID0gMjAwO1xuICAgIHRoaXMuX21heEp1bXBEaXN0YW5jZSA9IDIwO1xuICAgIHRoaXMuX2ZyYW1lSW5kZXggPSAwO1xuICAgIHRoaXMuX3YwID0gMDtcbiAgICB0aGlzLmNoZWNrRmxvb3JDb25maWcoKTtcbn07XG5cbkdhbWVDb250cm9sbGVyLnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogR2FtZUNvbnRyb2xsZXIsXG4gICAgRXZlbnQ6IFsnZ2FtZW92ZXInLCAnc3RhcnQnLCAncmVydW4nLCAnc3RvcCcsICdzY29yZXVwZGF0ZSddLFxuICAgIG9uOiBmdW5jdGlvbiBvbihldmVudCwgZm4pIHtcbiAgICAgICAgaWYgKHRoaXMuRXZlbnQuaW5kZXhPZihldmVudCkgPT09IC0xKSByZXR1cm47XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5vbihldmVudCwgZm4pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5ri45oiP57uT5p2fXG4gICAgICovXG4gICAgZ2FtZW92ZXI6IGZ1bmN0aW9uIGdhbWVvdmVyKCkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRjb250YWluZXIudHJpZ2dlcignZ2FtZW92ZXInKTtcbiAgICAgICAgICAgICQoJyNnYW1lLWN0JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmdhbWUtb3ZlcicpLnNob3coKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCAyMDApO1xuICAgIH0sXG4gICAgY2hlY2tGbG9vckNvbmZpZzogZnVuY3Rpb24gY2hlY2tGbG9vckNvbmZpZygpIHtcbiAgICAgICAgdmFyIHJhbmdlQXJyYXkgPSBbMF07XG4gICAgICAgIHZhciB0b3RhbFJhdGUgPSAwO1xuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5mbG9vclJhdGU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25maWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfcmF0ZSA9IGNvbmZpZ1tpXS5yYXRlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfcmF0ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdyYXRlIHR5cGUgZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvdGFsUmF0ZSArPSBfcmF0ZTtcbiAgICAgICAgICAgIHJhbmdlQXJyYXkucHVzaCh0b3RhbFJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b3RhbFJhdGUgIT09IDEwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3JhdGUg5Yqg6LW35p2l5Yqh5b+F562J5LqOMTAwIScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Zsb29yUmF0ZUFycmF5ID0gcmFuZ2VBcnJheTtcbiAgICB9LFxuICAgIGdldFJhbmRvd0Zsb29yOiBmdW5jdGlvbiBnZXRSYW5kb3dGbG9vcihyYW5nZUFycmF5KSB7XG4gICAgICAgIHZhciBkaWNlID0gTWF0aC5yYW5kb20oKSAqIDEwMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZUFycmF5Lmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRpY2UgPj0gcmFuZ2VBcnJheVtpXSAmJiBkaWNlIDwgcmFuZ2VBcnJheVtpICsgMV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mbG9vclJhdGVbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOWIm+W7uualvOWxglxuICAgICAqL1xuICAgIGNyZWF0ZUZsb29yU3BhbjogZnVuY3Rpb24gY3JlYXRlRmxvb3JTcGFuKCkge1xuICAgICAgICB2YXIgX3RvcCA9IHRoaXMuX2Zsb29yU2Nyb2xsZXJZICs9IHRoaXMuZmxvb3JEZWx0YVksXG4gICAgICAgICAgICBfbGVmdCA9IE1hdGgucmFuZG9tKCkgKiAodGhpcy5jYW52YXNXaWR0aCAtIHRoaXMuZmxvb3JXaWR0aCk7XG4gICAgICAgIHZhciBmbG9vckNvbmZpZyA9IHRoaXMuZ2V0UmFuZG93Rmxvb3IodGhpcy5fZmxvb3JSYXRlQXJyYXkpO1xuICAgICAgICB2YXIgZmxvb3JFbGVtZW50ID0gJzxpIGNsYXNzPVwiZmxvb3IgJyArIGZsb29yQ29uZmlnLm5hbWUgKyAnXCI+PC9pPic7XG5cbiAgICAgICAgJChmbG9vckVsZW1lbnQpLmNzcyh7XG4gICAgICAgICAgICB0b3A6IF90b3AsXG4gICAgICAgICAgICBsZWZ0OiBfbGVmdCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLmZsb29yV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZmxvb3JIZWlnaHRcbiAgICAgICAgfSkuYXBwZW5kVG8odGhpcy4kc2Nyb2xsZXIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog56e76Zmk5qW85bGCXG4gICAgICovXG4gICAgcmVtb3ZlRmxvb3JTYXBuOiBmdW5jdGlvbiByZW1vdmVGbG9vclNhcG4oKSB7XG4gICAgICAgICQoJy5mbG9vcicpLmVxKDApLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmZsb29yU2NvcmUrKztcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSgpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05pS56KGAXG4gICAgICovXG4gICAgdXBkYXRlQmxvb2Q6IGZ1bmN0aW9uIHVwZGF0ZUJsb29kKCkge1xuICAgICAgICB2YXIgJGJsb29kRWxlID0gJCgnLmJsb29kIGknKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkYmxvb2RFbGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIDwgdGhpcy5ibG9vZCkge1xuICAgICAgICAgICAgICAgICRibG9vZEVsZS5lcShpKS5yZW1vdmVDbGFzcygnbG9zZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkYmxvb2RFbGUuZXEoaSkuYWRkQ2xhc3MoJ2xvc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5L+u5pS55YiG5pWwXG4gICAgICovXG4gICAgdXBkYXRlU2NvcmU6IGZ1bmN0aW9uIHVwZGF0ZVNjb3JlKCkge1xuICAgICAgICB0aGlzLiRjb250YWluZXIudHJpZ2dlcignc2NvcmV1cGRhdGUnKTtcbiAgICAgICAgJCgnLnRleHQtc2NvcmUnKS50ZXh0KHRoaXMuZmxvb3JTY29yZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDlpLHliIbmlbBcbiAgICAgKi9cbiAgICBsb3NlQmxvb2Q6IGZ1bmN0aW9uIGxvc2VCbG9vZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX19vbkZsb29yKSByZXR1cm47XG4gICAgICAgIHRoaXMuYmxvb2QgLT0gNDtcbiAgICAgICAgLy/kurrlj5jnuqJcbiAgICAgICAgdGhpcy4kcGVvcGxlLmFkZENsYXNzKCdkYW5nZXInKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRwZW9wbGUucmVtb3ZlQ2xhc3MoJ2RhbmdlcicpO1xuICAgICAgICB9LmJpbmQodGhpcyksIDEwMDApO1xuXG4gICAgICAgIC8v6IOM5b2x6Zeq54OBXG4gICAgICAgICQoJyNnYW1lLWN0JykuYWRkQ2xhc3MoJ2RhbmdlcicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJyNnYW1lLWN0JykucmVtb3ZlQ2xhc3MoJ2RhbmdlcicpO1xuICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgIGlmICh0aGlzLmJsb29kIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuYmxvb2QgPSAwO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCbG9vZCgpO1xuICAgICAgICAgICAgdGhpcy5nYW1lb3ZlcigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlQmxvb2QoKTtcbiAgICB9LFxuICAgIGFkZEJsb29kOiBmdW5jdGlvbiBhZGRCbG9vZCgpIHtcbiAgICAgICAgLy/lvZPkurrnianlnKjlubPlj7DkuIrml7bvvIzmiJbogIXooYDph4/lpKfkuo4xMu+8jOS4jemHjeWkjeWKoOihgFxuICAgICAgICBpZiAodGhpcy5fX29uRmxvb3IgfHwgdGhpcy5ibG9vZCA+PSAxMikgcmV0dXJuO1xuICAgICAgICB0aGlzLmJsb29kICs9IDE7XG4gICAgICAgIHRoaXMudXBkYXRlQmxvb2QoKTtcbiAgICB9LFxuICAgIGZsb29yTm9ybWFsOiBmdW5jdGlvbiBmbG9vck5vcm1hbCgpIHtcbiAgICAgICAgdGhpcy5hZGRCbG9vZCgpO1xuICAgIH0sXG4gICAgZmxvb3JOYWlsOiBmdW5jdGlvbiBmbG9vck5haWwoKSB7XG4gICAgICAgIHRoaXMubG9zZUJsb29kKCk7XG4gICAgfSxcbiAgICBmbG9vcldlYWs6IGZ1bmN0aW9uIGZsb29yV2VhaygkZmxvb3JFbGUpIHtcbiAgICAgICAgdGhpcy5hZGRCbG9vZCgpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRmbG9vckVsZS5hZGRDbGFzcygnb3ZlcicpO1xuICAgICAgICAgICAgJGZsb29yRWxlWzBdLmNyb3NzID0gdHJ1ZTtcbiAgICAgICAgfSwgMjAwKTtcbiAgICB9LFxuICAgIGZsb29yU2Nyb2xsOiBmdW5jdGlvbiBmbG9vclNjcm9sbChkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5hZGRCbG9vZCgpO1xuICAgICAgICB0aGlzLl9fZmxvb3JTY3JvbGxEaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgfSxcbiAgICBmbG9vclNjcm9sbEVuZDogZnVuY3Rpb24gZmxvb3JTY3JvbGxFbmQoKSB7XG4gICAgICAgIHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9IG51bGw7XG4gICAgfSxcbiAgICBmbG9vclNwcmluZzogZnVuY3Rpb24gZmxvb3JTcHJpbmcoJGZsb29yRWxlKSB7XG4gICAgICAgIHRoaXMuX18kY3VycmVudEp1bXBGbG9vciA9ICRmbG9vckVsZTtcbiAgICAgICAgdGhpcy5qdW1wU3RhcnQoKTtcbiAgICAgICAgdGhpcy5hZGRCbG9vZCgpO1xuICAgIH0sXG4gICAganVtcFN0YXJ0OiBmdW5jdGlvbiBqdW1wU3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX19qdW1wTW9kZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX18kY3VycmVudEp1bXBGbG9vci5hZGRDbGFzcygndXAnKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9fJGN1cnJlbnRKdW1wRmxvb3IucmVtb3ZlQ2xhc3MoJ3VwJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMjAwKTtcbiAgICB9LFxuICAgIGp1bXBFbmQ6IGZ1bmN0aW9uIGp1bXBFbmQoaGl0VG9wKSB7XG4gICAgICAgIGlmICghdGhpcy5fX2p1bXBNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhpdFRvcCkge1xuICAgICAgICAgICAgdGhpcy5fXyRjdXJyZW50SnVtcEZsb29yWzBdLmNyb3NzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvL+mHjee9rui3s+i3g+mrmOW6plxuICAgICAgICB0aGlzLl9jdXJyZW50SnVtcERpc3RhbmNlID0gMDtcbiAgICAgICAgLy/op6PpmaTot7Pot4NcbiAgICAgICAgdGhpcy5fX2p1bXBNb2RlID0gZmFsc2U7XG4gICAgfSxcbiAgICBwZW9wbGU6IGZ1bmN0aW9uIHBlb3BsZShmcHMpIHtcbiAgICAgICAgLy/mr4/luKfmtojogJfml7bpl7QgbXNcbiAgICAgICAgdmFyIGR0ID0gMSAvIGZwcztcbiAgICAgICAgLy/kurrniannurXlkJHmr4/luKfnp7vliqjot53nprsgXG4gICAgICAgIHZhciBfZGVsdGFQZW9wbGVZID0gdGhpcy5fdjAgKiBkdCArIHRoaXMuZ3Jhdml0eSAqIGR0ICogZHQgLyAyO1xuICAgICAgICAvL+abtOaWsOaXtumXtCB0PXQrZHQ7XG4gICAgICAgIHRoaXMuX3QgKz0gZHQ7XG4gICAgICAgIC8vIOabtOaWsOmAn+W6piB2PWF0XG4gICAgICAgIHRoaXMuX3YwID0gdGhpcy5ncmF2aXR5ICogdGhpcy5fdDtcbiAgICAgICAgLy/ljbfovbTnurXlkJHmr4/luKfnp7vliqjot53nprtcbiAgICAgICAgdmFyIF9kZWx0YVkgPSB0aGlzLnNwZWVkIC8gZnBzO1xuICAgICAgICAvL+S6uueJqeaoquWQkeavj+W4p+enu+WKqOi3neemu1xuICAgICAgICB2YXIgX2RlbHRhUGVvcGxlVmVydGljYWwgPSB0aGlzLnBlb3BsZVZlcnRpY2FsU3BlZWQgLyBmcHM7XG4gICAgICAgIC8vIOe8k+WtmGZsb29yXG4gICAgICAgIHZhciAkZmxvb3IgPSAkKCcuZmxvb3InKTtcbiAgICAgICAgLy/nvJPlrZhvZmZzZXRcbiAgICAgICAgdmFyIHBlb3BsZU9mZnNldCA9IHRoaXMuJHBlb3BsZS5vZmZzZXQoKTtcblxuICAgICAgICAvL+S6uueJqeaOieiQveWxj+W5leS4i+aWue+8jOa4uOaIj+e7k+adn1xuICAgICAgICBpZiAocGVvcGxlT2Zmc2V0LnRvcCA+IHRoaXMuY2FudmFzSGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVvdmVyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8g56Kw5pKe5qOA5rWLXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGZsb29yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvL+e8k+WtmG9mZnNldFxuICAgICAgICAgICAgdmFyIGZsb29yT2Zmc2V0ID0gJGZsb29yLmVxKGkpLm9mZnNldCgpO1xuICAgICAgICAgICAgLy/kurrniankuI7mpbzmoq/nurXlkJHot53nprtcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZUdhcCA9IE1hdGguYWJzKHBlb3BsZU9mZnNldC50b3AgKyB0aGlzLnBlb3BsZUhlaWdodCAtIGZsb29yT2Zmc2V0LnRvcCk7XG4gICAgICAgICAgICAvLyDlvZPkurrnianmkp7liLDpobbpg6jvvIzmjonooYAr5o6J6JC9K+aJk+aWrei3s+i3g1xuICAgICAgICAgICAgaWYgKHBlb3BsZU9mZnNldC50b3AgPD0gX2RlbHRhUGVvcGxlWSArIF9kZWx0YVkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLl9fb25GbG9vciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuanVtcEVuZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvc2VCbG9vZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g6Lez6LeD5qih5byP5LiN6L+b5YWl5qOA5rWLXG4gICAgICAgICAgICBpZiAoIXRoaXMuX19qdW1wTW9kZSAmJlxuICAgICAgICAgICAgLy/lhYPntKDkuI3lj6/nm7TmjqXnqb/ov4dcbiAgICAgICAgICAgICEkZmxvb3IuZXEoaSlbMF0uY3Jvc3MgJiZcbiAgICAgICAgICAgIC8vIOS6uueJqeS4jualvOair+e6teWQkei3neemu+WcqOS4gOW4p+enu+WKqOi3neemu+S5i+WGhVxuICAgICAgICAgICAgZGlzdGFuY2VHYXAgPD0gX2RlbHRhUGVvcGxlWSArIF9kZWx0YVkgJiZcbiAgICAgICAgICAgIC8vIOS6uueJqeaoquWQkei3neemu+S4jei2hei/h+alvOair+acgOW3plxuICAgICAgICAgICAgcGVvcGxlT2Zmc2V0LmxlZnQgPiBmbG9vck9mZnNldC5sZWZ0IC0gdGhpcy5wZW9wbGVXaWR0aCAmJlxuICAgICAgICAgICAgLy/kurrnianmqKrlkJHot53nprvkuI3otbDov4fmpbzmoq/mnIDlj7NcbiAgICAgICAgICAgIHBlb3BsZU9mZnNldC5sZWZ0IDwgZmxvb3JPZmZzZXQubGVmdCArIHRoaXMuZmxvb3JXaWR0aCkge1xuICAgICAgICAgICAgICAgIC8vIOS6uueJqeS4jualvOair+WBj+W3ruS/ruato1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVZID0gZmxvb3JPZmZzZXQudG9wIC0gdGhpcy5wZW9wbGVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgLy8g5pa95Yqg5ZCE57G75qW85qKv54m55q6K5bGe5oCnXG4gICAgICAgICAgICAgICAgaWYgKCRmbG9vci5lcShpKS5oYXNDbGFzcygnbm9ybWFsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9vck5vcm1hbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJGZsb29yLmVxKGkpLmhhc0NsYXNzKCduYWlsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9vck5haWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRmbG9vci5lcShpKS5oYXNDbGFzcygnc3ByaW5nJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9vclNwcmluZygkZmxvb3IuZXEoaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJGZsb29yLmVxKGkpLmhhc0NsYXNzKCd3ZWFrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9vcldlYWsoJGZsb29yLmVxKGkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRmbG9vci5lcShpKS5oYXNDbGFzcygnc2Nyb2xsLWxlZnQnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb29yU2Nyb2xsKCdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkZmxvb3IuZXEoaSkuaGFzQ2xhc3MoJ3Njcm9sbC1yaWdodCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvb3JTY3JvbGwoJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3QgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX19vbkZsb29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5b2T5b6q546v5omn6KGM5a6M5q+V77yM5LuN54S25rKh5pyJ5Y+R546w56Kw5pKe77yM5YiZ6KGo5piO5Lq654mp5LiN5Zyo5bmz5Y+w5LiKXG4gICAgICAgICAgICBpZiAoaSA9PT0gJGZsb29yLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fb25GbG9vciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy/kurrnianlkJHkuIrot7PotbdcbiAgICAgICAgaWYgKHRoaXMuX19qdW1wTW9kZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRKdW1wRGlzdGFuY2UgPj0gdGhpcy5fbWF4SnVtcERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wRW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRKdW1wRGlzdGFuY2UgKz0gX2RlbHRhUGVvcGxlWTtcbiAgICAgICAgICAgICAgICAvLyDlkJHkuIrot7PotbfmlYjmnpzopoHpop3lpJbliqDkuIpfZGVsdGFZ77yM5Lul5Yy56YWN5Y236L206L+Q5Yqo54q25oCBXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVkgLT0gX2RlbHRhUGVvcGxlWSArIF9kZWx0YVk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDkurrnianlkJHkuIvlnaDokL0r5Y+W5raI5qW85qKv5bem5Y+z5Yqg6YCf54q25oCBXG4gICAgICAgIGlmICghdGhpcy5fX29uRmxvb3IgJiYgIXRoaXMuX19qdW1wTW9kZSkge1xuICAgICAgICAgICAgdGhpcy5mbG9vclNjcm9sbEVuZCgpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVkgKz0gX2RlbHRhUGVvcGxlWTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaoquWQkei/kOWKqOmihOWkhOeQhlxuICAgICAgICB2YXIgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgPSBfZGVsdGFQZW9wbGVWZXJ0aWNhbDtcbiAgICAgICAgLy/lpITnkIbkurrnianlkJHlt6bov5DliqhcbiAgICAgICAgaWYgKHRoaXMuX3Blb3BsZUdvTGVmdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgKj0gMS41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsICo9IDEuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsIC09IF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOWkhOeQhuS6uueJqeWQkeWPs+i/kOWKqFxuICAgICAgICBpZiAodGhpcy5fcGVvcGxlR29SaWdodCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgKj0gMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsICo9IDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgPCB0aGlzLmNhbnZhc1dpZHRoIC0gdGhpcy5wZW9wbGVXaWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArPSBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyDlpITnkIbkurrnianlnKjmu5rliqjmpbzmoq/kuIrnmoToh6rliqjov5DliqhcbiAgICAgICAgaWYgKCF0aGlzLl9wZW9wbGVHb1JpZ2h0ICYmICF0aGlzLl9wZW9wbGVHb0xlZnQpIHtcbiAgICAgICAgICAgIF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsICo9IDAuNTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9fZmxvb3JTY3JvbGxEaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCAtPSBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA8IHRoaXMuY2FudmFzV2lkdGggLSB0aGlzLnBlb3BsZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArPSBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy/mm7TmlrDkurrop4blm75cbiAgICAgICAgdGhpcy5wZW9wbGVVcGRhdGVWaWV3KCk7XG4gICAgfSxcbiAgICAvL+abtOaWsOWNt+i9tOS9jee9rlxuICAgIGZsb29yVXBkYXRlVmlldzogZnVuY3Rpb24gZmxvb3JVcGRhdGVWaWV3KCkge1xuICAgICAgICBpZiAoTW9kZXJuaXpyLmNzc3RyYW5zZm9ybXMzZCkge1xuICAgICAgICAgICAgdGhpcy4kc2Nyb2xsZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNmb3JtM2QoMCwnICsgdGhpcy5fY3VycmVudFNjcm9sbGVyWSArICdweCwwKScsXG4gICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAndHJhbnNmb3JtM2QoMCwnICsgdGhpcy5fY3VycmVudFNjcm9sbGVyWSArICdweCwwKScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgwLCcgKyB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4LDApJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoTW9kZXJuaXpyLmNzc3RyYW5zZm9ybXMpIHtcbiAgICAgICAgICAgIHRoaXMuJHNjcm9sbGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHRoaXMuX2N1cnJlbnRTY3JvbGxlclkgKyAncHgpJyxcbiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKCcgKyB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4KScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKCcgKyB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4KSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kc2Nyb2xsZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAndG9wJzogdGhpcy5fY3VycmVudFNjcm9sbGVyWSArICdweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwZW9wbGVVcGRhdGVWaWV3OiBmdW5jdGlvbiBwZW9wbGVVcGRhdGVWaWV3KCkge1xuICAgICAgICBpZiAodGhpcy5fX29uRmxvb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wZW9wbGVHb0xlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlb3BsZVJvdGF0ZVogLT0gdGhpcy5wZW9wbGVSb3RhdGVEZWx0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9wZW9wbGVHb1JpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW9wbGVSb3RhdGVaICs9IHRoaXMucGVvcGxlUm90YXRlRGVsdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1vZGVybml6ci5jc3N0cmFuc2Zvcm1zM2QpIHtcbiAgICAgICAgICAgIHRoaXMuJHBlb3BsZS5jc3Moe1xuICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgnICsgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICsgJ3B4LCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCwwKScsXG4gICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAndHJhbnNmb3JtM2QoJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArICdweCwnICsgdGhpcy5fY3VycmVudFBlb3BsZVkgKyAncHgsMCknLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNmb3JtM2QoJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArICdweCwnICsgdGhpcy5fY3VycmVudFBlb3BsZVkgKyAncHgsMCknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChNb2Rlcm5penIuY3NzdHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgdGhpcy4kcGVvcGxlLmNzcyh7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgnICsgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICsgJ3B4LCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCknLFxuICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgnICsgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICsgJ3B4LCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCknLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgKyAncHgsJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVZICsgJ3B4KSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kcGVvcGxlLmNzcyh7XG4gICAgICAgICAgICAgICAgJ2xlZnQnOiB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgKyAncHgnLFxuICAgICAgICAgICAgICAgICd0b3AnOiB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwZW9wbGVVc2VyQ29udHJvbGxlcjogZnVuY3Rpb24gcGVvcGxlVXNlckNvbnRyb2xsZXIoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICQod2luZG93KS5rZXlkb3duKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb0xlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb1JpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvTGVmdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmtleXVwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb0xlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5jb250cm9sbGVyIC5sZWZ0LWN0Jykub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb1JpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29MZWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSkub24oJ3RvdW5jaGVuZCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvTGVmdCA9IGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuY29udHJvbGxlciAucmlnaHQtY3QnKS5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvTGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KS5vbigndG91Y2hlbmQnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb1JpZ2h0ID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY29yZTogZnVuY3Rpb24gY29yZShmcHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgICAgIF9kZWx0YVkgPSB0aGlzLnNwZWVkIC8gZnBzLFxuICAgICAgICAgICAgLy/ljbfovbTnurXlkJHmr4/luKfnp7vliqjot53nprtcbiAgICAgICAgJGZsb29yID0gJCgnLmZsb29yJyk7XG5cbiAgICAgICAgLy/orqHnrpfljbfovbTkvY3nva5cbiAgICAgICAgdGhpcy5fY3VycmVudFNjcm9sbGVyWSAtPSBfZGVsdGFZO1xuXG4gICAgICAgIC8v5b2T5Y236L206LaF5Ye65LiA5a6a6ZW/5bqm5LmL5ZCO77yM6L+b6KGM5L2N572ucmVzZXTvvIznvKnlh4/plb/luqbvvIzpmLLmraJDcmFzaOeOsOixoVxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFNjcm9sbGVyWSA8PSAtdGhpcy5jYW52YXNIZWlnaHQgKiAyKSB7XG4gICAgICAgICAgICAvL+WwhuWNt+i9tOa7muWKqOmrmOW6puWHj+Wwj+S4gOWxj1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcm9sbGVyWSArPSB0aGlzLmNhbnZhc0hlaWdodDtcbiAgICAgICAgICAgIC8v5bCG5qW85qKv5YGP56e76auY5bqm5YeP5bCR5LiA5bGPXG4gICAgICAgICAgICB0aGlzLl9mbG9vclNjcm9sbGVyWSAtPSB0aGlzLmNhbnZhc0hlaWdodDtcbiAgICAgICAgICAgIC8v6YeN572u5YaN5pyJ5qW85qKv5L2N572uXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRmbG9vci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICRmbG9vci5lcShpKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHBhcnNlSW50KCQoJy5mbG9vcicpLmVxKGkpLmNzcygndG9wJykpIC0gdGhpcy5jYW52YXNIZWlnaHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL+abtOaWsOWNt+i9tOS9jee9rlxuICAgICAgICB0aGlzLmZsb29yVXBkYXRlVmlldygpO1xuXG4gICAgICAgIC8v5q+P5Liq5Y+w6Zi256e75Ye66KeG6YeO5YiZ5riF6Zmk5Y+w6Zi277yM5bm25LiU5Zyo5bqV6YOo5aKe5Yqg5LiA5Liq5paw55qE5Y+w6Zi2XG4gICAgICAgIGlmICgkZmxvb3IuZXEoMCkub2Zmc2V0KCkudG9wIDw9IC0yMCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGbG9vclNwYW4oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRmxvb3JTYXBuKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+iwg+eUqOS6uueJqea4suafk1xuICAgICAgICB0aGlzLnBlb3BsZShmcHMpO1xuICAgICAgICAvL+i1t+adpei2imhpZ2hcbiAgICAgICAgaWYgKHRoaXMuc3BlZWQgPD0gdGhpcy5tYXhTcGVlZCkge1xuICAgICAgICAgICAgdGhpcy5zcGVlZCArPSAwLjE7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJ1bjogZnVuY3Rpb24gcnVuKGZwcykge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuaW1hdGlvbiBoYXMgYXJlYWR5IGluIHByb2Nlc3MscGxlYXNlIGRvIG5vdCBydW4gYWdhaW4hJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcHMgPSBmcHMgPSBmcHMgfHwgNjA7XG4gICAgICAgIHZhciBsb29wdGltZSA9IDEwMDAgLyBmcHM7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHJ1bkFuaW1hdGlvbiA9IGZ1bmN0aW9uIHJ1bkFuaW1hdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29yZShmcHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF90aGlzLmFuaW1hdGlvbiA9IHJ1bkFuaW1hdGlvbigpO1xuICAgICAgICAgICAgfSwgbG9vcHRpbWUpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRpb24gPSBydW5BbmltYXRpb24oKTtcbiAgICB9LFxuICAgIHN0b3A6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFuaW1hdGlvbik7IC8v5pqC5YGc5Yqo55S7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLiRjb250YWluZXIudHJpZ2dlcignc3RvcCcpO1xuICAgIH0sXG4gICAgcmVSdW46IGZ1bmN0aW9uIHJlUnVuKCkge1xuICAgICAgICB0aGlzLiRjb250YWluZXIudHJpZ2dlcigncmVydW4nKTtcbiAgICAgICAgLy/ph43nva7lj4LmlbBcbiAgICAgICAgJC5leHRlbmQodGhpcywgdGhpcy5fX3BhcmFtQmFja3VwKTtcbiAgICAgICAgLy/liKDpmaTmjonlho3mnInmpbzmoq9cbiAgICAgICAgJCgnLmZsb29yJykucmVtb3ZlKCk7XG4gICAgICAgIC8v6YeN5paw5Yid5aeL5YyWXG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9LFxuICAgIGJhY2t1cDogZnVuY3Rpb24gYmFja3VwKCkge1xuICAgICAgICAvLyDlpIfku73lr53orr7nva7lj4LmlbDvvIznlKjkuo7muLjmiI9yZXNldFxuICAgICAgICB0aGlzLl9fcGFyYW1CYWNrdXAgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNbaV0gPT09ICdudW1iZXInIHx8IHR5cGVvZiB0aGlzW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX19wYXJhbUJhY2t1cFtpXSA9IHRoaXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgICAgIGZsb29yTG9vcCA9IDA7XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci50cmlnZ2VyKCdzdGFydCcpO1xuICAgICAgICB0aGlzLmNhbnZhc1dpZHRoID0gdGhpcy4kY2FudmFzLndpZHRoKCk7XG4gICAgICAgIHRoaXMuY2FudmFzSGVpZ2h0ID0gdGhpcy4kY2FudmFzLmhlaWdodCgpO1xuICAgICAgICB0aGlzLmZsb29yRGVsdGFZID0gdGhpcy5jYW52YXNIZWlnaHQgLyAxMTtcbiAgICAgICAgdGhpcy5mbG9vcldpZHRoID0gdGhpcy5jYW52YXNXaWR0aCAvIDU7XG4gICAgICAgIHRoaXMuZmxvb3JIZWlnaHQgPSB0aGlzLmZsb29yV2lkdGggLyA5O1xuICAgICAgICB0aGlzLnBlb3BsZUhlaWdodCA9IHBhcnNlSW50KHRoaXMuJHBlb3BsZS5jc3MoJ2hlaWdodCcpKTtcbiAgICAgICAgdGhpcy5wZW9wbGVXaWR0aCA9IHBhcnNlSW50KHRoaXMuJHBlb3BsZS5jc3MoJ3dpZHRoJykpO1xuXG4gICAgICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA9IHRoaXMuY2FudmFzV2lkdGggLyAyICsgdGhpcy5wZW9wbGVXaWR0aCAvIDI7XG4gICAgICAgIHRoaXMuYmFja3VwKCk7XG4gICAgICAgIC8v5Yid5aeL5YyW5Y+w6Zi2XG4gICAgICAgIHdoaWxlIChmbG9vckxvb3ArKyA8IDEzKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUZsb29yU3BhbigpO1xuICAgICAgICB9XG4gICAgICAgIC8v5Yid5aeL5YyW5Lu75Yqh5o6n5Yi2XG4gICAgICAgIHRoaXMucGVvcGxlVXNlckNvbnRyb2xsZXIoKTtcbiAgICAgICAgLy/pppbmrKHmm7TmlrDkurrnianop4blm75cbiAgICAgICAgdGhpcy5wZW9wbGVVcGRhdGVWaWV3KCk7XG4gICAgICAgIC8v6aaW5qyh5pu05paw5Lq654mp6KGA6YePXG4gICAgICAgIHRoaXMudXBkYXRlQmxvb2QoKTtcbiAgICAgICAgLy/pppbmrKHmm7TmlrDmpbzlsYLmlbBcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSgpO1xuICAgICAgICAvL+S7peavj+enkjYw5bin5omn6KGM5ri45oiP5Yqo55S7XG4gICAgICAgIHRoaXMucnVuKHRoaXMuZnBzKTtcbiAgICB9XG5cbn07XG5leHBvcnRzLmRlZmF1bHQgPSBHYW1lQ29udHJvbGxlcjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///10\\n\")}});","extractedComments":[]}
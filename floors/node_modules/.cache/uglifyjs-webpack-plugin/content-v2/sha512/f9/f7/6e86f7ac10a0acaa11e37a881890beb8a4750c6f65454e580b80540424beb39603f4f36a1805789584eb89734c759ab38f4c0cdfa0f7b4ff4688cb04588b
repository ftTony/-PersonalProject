{"map":"{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}","code":"webpackHotUpdate(0,{10:function(module,exports,__webpack_require__){\"use strict\";eval(\"\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", {\\n    value: true\\n});\\n\\n__webpack_require__(9);\\n\\nwindow.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (cb) {\\n    cb();\\n};\\n\\nvar GameController = function GameController() {\\n    this.floorRate = [{\\n        name: 'normal',\\n        rate: 15\\n    }, {\\n        name: 'spring',\\n        rate: 15\\n    }, {\\n        name: 'weak',\\n        rate: 15\\n    }, {\\n        name: 'scroll-left',\\n        rate: 10\\n    }, {\\n        name: 'scroll-right',\\n        rate: 10\\n    }, {\\n        name: 'nail',\\n        rate: 35\\n    }];\\n    this.fps = 60; //刷新频率\\n    this.speed = 50; //卷轴初始速度\\n    this.maxSpeed = 350; //卷轴最大速度\\n    this.gravity = 1000; //重力加速度px每秒平方\\n    this.peopleVerticalSpeed = 200; //人物横向移动速度\\n    this.animation = null;\\n    this.canvasWidth = 0; //画布宽度\\n    this.canvasHeight = 0; //画面高度\\n    this.floorWidth = 0; //楼层宽度\\n    this.floorHeight = 0; //楼层高度\\n    this.floorDeltaY = 50;\\n    this.floorScore = 1;\\n    this.blood = 12; //人物血量\\n    this.$container = $('.container');\\n    this.$canvas = $('.game-canvas');\\n    this.$scroller = $('.scroller');\\n    this.$people = $('.people');\\n    this.peopleRotateZ = 0;\\n    this.peopleRotateDelta = 25; //小球滚动角度\\n    this.peopleHeight = 0;\\n    this.peopleWidth = 0;\\n    this._t = 0;\\n    this._currentScrollerY = 0;\\n    this._currentPeopleY = 20;\\n    this._currentPeopleVertical = 0;\\n    this._floorScrollerY = 200;\\n    this._maxJumpDistance = 20; //小球跳动的最大高度\\n    this._currentJumpDistance = 0;\\n    this._frameIndex = 0;\\n    this._v0 = 0;\\n    this.checkFloorConfig();\\n};\\n\\nGameController.prototype = {\\n    constructor: GameController,\\n    Event: ['gameover', 'start', 'rerun', 'stop', 'scoreupdate'],\\n    on: function on(event, fn) {\\n        if (this.Event.indexOf(event) === -1) return;\\n        this.$container.on(event, fn);\\n    },\\n    /**\\n     * 游戏结束\\n     */\\n    gameover: function gameover() {\\n        this.stop();\\n        setTimeout(function () {\\n            this.$container.trigger('gameover');\\n            $('#game-ct').hide();\\n            $('.game-over').show();\\n        }.bind(this), 200);\\n    },\\n    checkFloorConfig: function checkFloorConfig() {\\n        var rangeArray = [0];\\n        var totalRate = 0;\\n        var config = this.floorRate;\\n\\n        for (var i = 0; i < config.length; i++) {\\n            var _rate = config[i].rate;\\n            if (typeof _rate !== 'number') {\\n                throw new TypeError('rate type error');\\n            }\\n            totalRate += _rate;\\n            rangeArray.push(totalRate);\\n        }\\n        if (totalRate !== 100) {\\n            throw new RangeError('rate 加起来务必等于100!');\\n        }\\n        this._floorRateArray = rangeArray;\\n    },\\n    getRandowFloor: function getRandowFloor(rangeArray) {\\n        var dice = Math.random() * 100;\\n        for (var i = 0; i < rangeArray.length - 1; i++) {\\n            if (dice >= rangeArray[i] && dice < rangeArray[i + 1]) {\\n                return this.floorRate[i];\\n            }\\n        }\\n    },\\n    /**\\n     * 创建楼层\\n     */\\n    createFloorSpan: function createFloorSpan() {\\n        var _top = this._floorScrollerY += this.floorDeltaY,\\n            _left = Math.random() * (this.canvasWidth - this.floorWidth);\\n        var floorConfig = this.getRandowFloor(this._floorRateArray);\\n        var floorElement = '<i class=\\\"floor ' + floorConfig.name + '\\\"></i>';\\n\\n        $(floorElement).css({\\n            top: _top,\\n            left: _left,\\n            width: this.floorWidth,\\n            height: this.floorHeight\\n        }).appendTo(this.$scroller);\\n    },\\n    /**\\n     * 移除楼层\\n     */\\n    removeFloorSapn: function removeFloorSapn() {\\n        $('.floor').eq(0).remove();\\n        this.floorScore++;\\n        this.updateScore();\\n    },\\n    /**\\n     * 更改血\\n     */\\n    updateBlood: function updateBlood() {\\n        var $bloodEle = $('.blood i');\\n        for (var i = 0; i < $bloodEle.length; i++) {\\n            if (i < this.blood) {\\n                $bloodEle.eq(i).removeClass('lose');\\n            } else {\\n                $bloodEle.eq(i).addClass('lose');\\n            }\\n        }\\n    },\\n    /**\\n     * 修改分数\\n     */\\n    updateScore: function updateScore() {\\n        this.$container.trigger('scoreupdate');\\n        $('.text-score').text(this.floorScore);\\n    },\\n    /**\\n     * 失分数\\n     */\\n    loseBlood: function loseBlood() {\\n        if (this.__onFloor) return;\\n        this.blood -= 4;\\n        //人变红\\n        this.$people.addClass('danger');\\n        setTimeout(function () {\\n            this.$people.removeClass('danger');\\n        }.bind(this), 1000);\\n\\n        //背影闪烁\\n        $('#game-ct').addClass('danger');\\n        setTimeout(function () {\\n            $('#game-ct').removeClass('danger');\\n        }, 100);\\n\\n        if (this.blood <= 0) {\\n            this.blood = 0;\\n            this.updateBlood();\\n            this.gameover();\\n            return;\\n        }\\n        this.updateBlood();\\n    },\\n    addBlood: function addBlood() {\\n        //当人物在平台上时，或者血量大于12，不重复加血\\n        if (this.__onFloor || this.blood >= 12) return;\\n        this.blood += 1;\\n        this.updateBlood();\\n    },\\n    floorNormal: function floorNormal() {\\n        this.addBlood();\\n    },\\n    floorNail: function floorNail() {\\n        this.loseBlood();\\n    },\\n    floorWeak: function floorWeak($floorEle) {\\n        this.addBlood();\\n        setTimeout(function () {\\n            $floorEle.addClass('over');\\n            $floorEle[0].cross = true;\\n        }, 200);\\n    },\\n    floorScroll: function floorScroll(direction) {\\n        this.addBlood();\\n        this.__floorScrollDirection = direction;\\n    },\\n    floorScrollEnd: function floorScrollEnd() {\\n        this.__floorScrollDirection = null;\\n    },\\n    floorSpring: function floorSpring($floorEle) {\\n        this.__$currentJumpFloor = $floorEle;\\n        this.jumpStart();\\n        this.addBlood();\\n    },\\n    jumpStart: function jumpStart() {\\n        this.__jumpMode = true;\\n        this.__$currentJumpFloor.addClass('up');\\n        setTimeout(function () {\\n            this.__$currentJumpFloor.removeClass('up');\\n        }.bind(this), 200);\\n    },\\n    jumpEnd: function jumpEnd(hitTop) {\\n        if (!this.__jumpMode) {\\n            return;\\n        }\\n        if (hitTop) {\\n            this.__$currentJumpFloor[0].cross = true;\\n        }\\n        //重置跳跃高度\\n        this._currentJumpDistance = 0;\\n        //解除跳跃\\n        this.__jumpMode = false;\\n    },\\n    people: function people(fps) {\\n        //每帧消耗时间 ms\\n        var dt = 1 / fps;\\n        //人物纵向每帧移动距离 \\n        var _deltaPeopleY = this._v0 * dt + this.gravity * dt * dt / 2;\\n        //更新时间 t=t+dt;\\n        this._t += dt;\\n        // 更新速度 v=at\\n        this._v0 = this.gravity * this._t;\\n        //卷轴纵向每帧移动距离\\n        var _deltaY = this.speed / fps;\\n        //人物横向每帧移动距离\\n        var _deltaPeopleVertical = this.peopleVerticalSpeed / fps;\\n        // 缓存floor\\n        var $floor = $('.floor');\\n        //缓存offset\\n        var peopleOffset = this.$people.offset();\\n\\n        //人物掉落屏幕下方，游戏结束\\n        if (peopleOffset.top > this.canvasHeight) {\\n            this.gameover();\\n            return;\\n        }\\n        // 碰撞检测\\n        for (var i = 0; i < $floor.length; i++) {\\n            //缓存offset\\n            var floorOffset = $floor.eq(i).offset();\\n            //人物与楼梯纵向距离\\n            var distanceGap = Math.abs(peopleOffset.top + this.peopleHeight - floorOffset.top);\\n            // 当人物撞到顶部，掉血+掉落+打断跳跃\\n            if (peopleOffset.top <= _deltaPeopleY + _deltaY) {\\n                this._t = 0;\\n                this.__onFloor = false;\\n                this.jumpEnd(true);\\n                this.loseBlood();\\n                break;\\n            }\\n            // 跳跃模式不进入检测\\n            if (!this.__jumpMode &&\\n            //元素不可直接穿过\\n            !$floor.eq(i)[0].cross &&\\n            // 人物与楼梯纵向距离在一帧移动距离之内\\n            distanceGap <= _deltaPeopleY + _deltaY &&\\n            // 人物横向距离不超过楼梯最左\\n            peopleOffset.left > floorOffset.left - this.peopleWidth &&\\n            //人物横向距离不走过楼梯最右\\n            peopleOffset.left < floorOffset.left + this.floorWidth) {\\n                // 人物与楼梯偏差修正\\n                this._currentPeopleY = floorOffset.top - this.peopleHeight;\\n                // 施加各类楼梯特殊属性\\n                if ($floor.eq(i).hasClass('normal')) {\\n                    this.floorNormal();\\n                }\\n                if ($floor.eq(i).hasClass('nail')) {\\n                    this.floorNail();\\n                }\\n                if ($floor.eq(i).hasClass('spring')) {\\n                    this.floorSpring($floor.eq(i));\\n                }\\n                if ($floor.eq(i).hasClass('weak')) {\\n                    this.floorWeak($floor.eq(i));\\n                }\\n                if ($floor.eq(i).hasClass('scroll-left')) {\\n                    this.floorScroll('left');\\n                }\\n                if ($floor.eq(i).hasClass('scroll-right')) {\\n                    this.floorScroll('right');\\n                }\\n                this._t = 0;\\n                this.__onFloor = true;\\n                break;\\n            }\\n            //当循环执行完毕，仍然没有发现碰撞，则表明人物不在平台上\\n            if (i === $floor.length - 1) {\\n                this.__onFloor = false;\\n            }\\n        }\\n\\n        //人物向上跳起\\n        if (this.__jumpMode) {\\n            if (this._currentJumpDistance >= this._maxJumpDistance) {\\n                this.jumpEnd();\\n            } else {\\n                this._currentJumpDistance += _deltaPeopleY;\\n                // 向上跳起效果要额外加上_deltaY，以匹配卷轴运动状态\\n                this._currentPeopleY -= _deltaPeopleY + _deltaY;\\n            }\\n        }\\n\\n        // 人物向下坠落+取消楼梯左右加速状态\\n        if (!this.__onFloor && !this.__jumpMode) {\\n            this.floorScrollEnd();\\n            this._currentPeopleY += _deltaPeopleY;\\n        }\\n\\n        // 横向运动预处理\\n        var __temp_deltaPeopleVertical = _deltaPeopleVertical;\\n        //处理人物向左运动\\n        if (this._peopleGoLeft) {\\n            if (this.__floorScrollDirection === 'left') {\\n                __temp_deltaPeopleVertical *= 1.5;\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                __temp_deltaPeopleVertical *= 1.5;\\n            }\\n            if (this._currentPeopleVertical > 0) {\\n                this._currentPeopleVertical -= __temp_deltaPeopleVertical;\\n            }\\n        }\\n        // 处理人物向右运动\\n        if (this._peopleGoRight) {\\n            if (this.__floorScrollDirection === 'left') {\\n                __temp_deltaPeopleVertical *= 0.5;\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                __temp_deltaPeopleVertical *= 0.5;\\n            }\\n            if (this._currentPeopleVertical < this.canvasWidth - this.peopleWidth) {\\n                this._currentPeopleVertical += __temp_deltaPeopleVertical;\\n            }\\n        }\\n        // 处理人物在滚动楼梯上的自动运动\\n        if (!this._peopleGoRight && !this._peopleGoLeft) {\\n            __temp_deltaPeopleVertical *= 0.5;\\n            if (this.__floorScrollDirection === 'left') {\\n                if (this._currentPeopleVertical > 0) {\\n                    this._currentPeopleVertical -= __temp_deltaPeopleVertical;\\n                }\\n            }\\n            if (this.__floorScrollDirection === 'right') {\\n                if (this._currentPeopleVertical < this.canvasWidth - this.peopleWidth) {\\n                    this._currentPeopleVertical += __temp_deltaPeopleVertical;\\n                }\\n            }\\n        }\\n        //更新人视图\\n        this.peopleUpdateView();\\n    },\\n    //更新卷轴位置\\n    floorUpdateView: function floorUpdateView() {\\n        if (Modernizr.csstransforms3d) {\\n            this.$scroller.css({\\n                '-webkit-transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)',\\n                '-ms-transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)',\\n                'transform': 'transform3d(0,' + this._currentScrollerY + 'px,0)'\\n            });\\n        } else if (Modernizr.csstransforms) {\\n            this.$scroller.css({\\n                '-webkit-transform': 'translateY(' + this._currentScrollerY + 'px)',\\n                '-ms-transform': 'translateY(' + this._currentScrollerY + 'px)',\\n                'transform': 'translateY(' + this._currentScrollerY + 'px)'\\n            });\\n        } else {\\n            this.$scroller.css({\\n                'top': this._currentScrollerY + 'px'\\n            });\\n        }\\n    },\\n    peopleUpdateView: function peopleUpdateView() {\\n        if (this.__onFloor) {\\n            if (this._peopleGoLeft) {\\n                this.peopleRotateZ -= this.peopleRotateDelta;\\n            }\\n            if (this._peopleGoRight) {\\n                this.peopleRotateZ += this.peopleRotateDelta;\\n            }\\n        }\\n        if (Modernizr.csstransforms3d) {\\n            this.$people.css({\\n                '-webkit-transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)',\\n                '-ms-transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)',\\n                'transform': 'transform3d(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px,0)'\\n            });\\n        } else if (Modernizr.csstransforms) {\\n            this.$people.css({\\n                '-webkit-transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)',\\n                '-ms-transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)',\\n                'transform': 'translate(' + this._currentPeopleVertical + 'px,' + this._currentPeopleY + 'px)'\\n            });\\n        } else {\\n            this.$people.css({\\n                'left': this._currentPeopleVertical + 'px',\\n                'top': this._currentPeopleY + 'px'\\n            });\\n        }\\n    },\\n    peopleUserController: function peopleUserController() {\\n        var _this = this;\\n        $(window).keydown(function (ev) {\\n            if (ev.key === 'ArrowRight') {\\n                _this._peopleGoRight = true;\\n                _this._peopleGoLeft = false;\\n                return;\\n            }\\n            if (ev.key === 'ArrowLeft') {\\n                _this._peopleGoRight = false;\\n                _this._peopleGoLeft = true;\\n            }\\n        }).keyup(function (ev) {\\n            if (ev.key === 'ArrowRight') {\\n                _this._peopleGoRight = false;\\n                return;\\n            }\\n            if (ev.key === 'ArrowLeft') {\\n                _this._peopleGoLeft = false;\\n                return;\\n            }\\n        });\\n\\n        $('.controller .left-ct').on('touchstart', function (ev) {\\n            _this._peopleGoRight = false;\\n            _this._peopleGoLeft = true;\\n            return false;\\n        }).on('tounchend', function (ev) {\\n            _this._peopleGoLeft = false;\\n        });\\n\\n        $('.controller .right-ct').on('touchstart', function (ev) {\\n            _this._peopleGoRight = true;\\n            _this._peopleGoLeft = false;\\n            return false;\\n        }).on('touchend', function (ev) {\\n            _this._peopleGoRight = false;\\n        });\\n    },\\n    core: function core(fps) {\\n        var _this = this,\\n            _deltaY = this.speed / fps,\\n            //卷轴纵向每帧移动距离\\n        $floor = $('.floor');\\n\\n        //计算卷轴位置\\n        this._currentScrollerY -= _deltaY;\\n\\n        //当卷轴超出一定长度之后，进行位置reset，缩减长度，防止Crash现象\\n        if (this._currentScrollerY <= -this.canvasHeight * 2) {\\n            //将卷轴滚动高度减小一屏\\n            this._currentScrollerY += this.canvasHeight;\\n            //将楼梯偏移高度减少一屏\\n            this._floorScrollerY -= this.canvasHeight;\\n            //重置再有楼梯位置\\n            for (var i = 0; i < $floor.length; i++) {\\n                $floor.eq(i).css({\\n                    top: parseInt($('.floor').eq(i).css('top')) - this.canvasHeight\\n                });\\n            }\\n        }\\n        //更新卷轴位置\\n        this.floorUpdateView();\\n\\n        //每个台阶移出视野则清除台阶，并且在底部增加一个新的台阶\\n        if ($floor.eq(0).offset().top <= -20) {\\n            this.createFloorSpan();\\n            this.removeFloorSapn();\\n        }\\n\\n        //调用人物渲染\\n        this.people(fps);\\n        //起来越high\\n        if (this.speed <= this.maxSpeed) {\\n            this.speed += 0.1;\\n        }\\n    },\\n    run: function run(fps) {\\n        if (this.animation) {\\n            console.error('Animation has aready in process,please do not run again!');\\n            return;\\n        }\\n\\n        this._fps = fps = fps || 60;\\n        var looptime = 1000 / fps;\\n        var _this = this;\\n\\n        var runAnimation = function runAnimation() {\\n            return setTimeout(function () {\\n                window.requestAnimationFrame(function () {\\n                    _this.core(fps);\\n                });\\n                _this.animation = runAnimation();\\n            }, looptime);\\n        };\\n        return this.animation = runAnimation();\\n    },\\n    stop: function stop() {\\n        clearTimeout(this.animation); //暂停动画\\n        this.animation = undefined;\\n        this.$container.trigger('stop');\\n    },\\n    reRun: function reRun() {\\n        this.$container.trigger('rerun');\\n        //重置参数\\n        $.extend(this, this.__paramBackup);\\n        //删除掉再有楼梯\\n        $('.floor').remove();\\n        //重新初始化\\n        this.start();\\n    },\\n    backup: function backup() {\\n        // 备份寝设置参数，用于游戏reset\\n        this.__paramBackup = {};\\n        for (var i in this) {\\n            if (typeof this[i] === 'number' || typeof this[i] === 'string') {\\n                this.__paramBackup[i] = this[i];\\n            }\\n        }\\n    },\\n    start: function start() {\\n        var _this = this,\\n            floorLoop = 0;\\n        this.$container.trigger('start');\\n        this.canvasWidth = this.$canvas.width();\\n        this.canvasHeight = this.$canvas.height();\\n        this.floorDeltaY = this.canvasHeight / 11;\\n        this.floorWidth = this.canvasWidth / 5;\\n        this.floorHeight = this.floorWidth / 9;\\n        this.peopleHeight = parseInt(this.$people.css('height'));\\n        this.peopleWidth = parseInt(this.$people.css('width'));\\n\\n        this._currentPeopleVertical = this.canvasWidth / 2 + this.peopleWidth / 2;\\n        this.backup();\\n        //初始化台阶\\n        while (floorLoop++ < 13) {\\n            this.createFloorSpan();\\n        }\\n        //初始化任务控制\\n        this.peopleUserController();\\n        //首次更新人物视图\\n        this.peopleUpdateView();\\n        //首次更新人物血量\\n        this.updateBlood();\\n        //首次更新楼层数\\n        this.updateScore();\\n        //以每秒60帧执行游戏动画\\n        this.run(this.fps);\\n    }\\n\\n};\\nexports.default = GameController;//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvZ2FtZV9jb250cm9sbGVyLmpzPzAyNTMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnJlcXVpcmUoJy4vemVwdG8tdG91Y2gnKTtcblxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYikge1xuICAgIGNiKCk7XG59O1xuXG52YXIgR2FtZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiBHYW1lQ29udHJvbGxlcigpIHtcbiAgICB0aGlzLmZsb29yUmF0ZSA9IFt7XG4gICAgICAgIG5hbWU6ICdub3JtYWwnLFxuICAgICAgICByYXRlOiAxNVxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3NwcmluZycsXG4gICAgICAgIHJhdGU6IDE1XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnd2VhaycsXG4gICAgICAgIHJhdGU6IDE1XG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnc2Nyb2xsLWxlZnQnLFxuICAgICAgICByYXRlOiAxMFxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3Njcm9sbC1yaWdodCcsXG4gICAgICAgIHJhdGU6IDEwXG4gICAgfSwge1xuICAgICAgICBuYW1lOiAnbmFpbCcsXG4gICAgICAgIHJhdGU6IDM1XG4gICAgfV07XG4gICAgdGhpcy5mcHMgPSA2MDsgLy/liLfmlrDpopHnjodcbiAgICB0aGlzLnNwZWVkID0gNTA7IC8v5Y236L205Yid5aeL6YCf5bqmXG4gICAgdGhpcy5tYXhTcGVlZCA9IDM1MDsgLy/ljbfovbTmnIDlpKfpgJ/luqZcbiAgICB0aGlzLmdyYXZpdHkgPSAxMDAwOyAvL+mHjeWKm+WKoOmAn+W6pnB45q+P56eS5bmz5pa5XG4gICAgdGhpcy5wZW9wbGVWZXJ0aWNhbFNwZWVkID0gMjAwOyAvL+S6uueJqeaoquWQkeenu+WKqOmAn+W6plxuICAgIHRoaXMuYW5pbWF0aW9uID0gbnVsbDtcbiAgICB0aGlzLmNhbnZhc1dpZHRoID0gMDsgLy/nlLvluIPlrr3luqZcbiAgICB0aGlzLmNhbnZhc0hlaWdodCA9IDA7IC8v55S76Z2i6auY5bqmXG4gICAgdGhpcy5mbG9vcldpZHRoID0gMDsgLy/mpbzlsYLlrr3luqZcbiAgICB0aGlzLmZsb29ySGVpZ2h0ID0gMDsgLy/mpbzlsYLpq5jluqZcbiAgICB0aGlzLmZsb29yRGVsdGFZID0gNTA7XG4gICAgdGhpcy5mbG9vclNjb3JlID0gMTtcbiAgICB0aGlzLmJsb29kID0gMTI7IC8v5Lq654mp6KGA6YePXG4gICAgdGhpcy4kY29udGFpbmVyID0gJCgnLmNvbnRhaW5lcicpO1xuICAgIHRoaXMuJGNhbnZhcyA9ICQoJy5nYW1lLWNhbnZhcycpO1xuICAgIHRoaXMuJHNjcm9sbGVyID0gJCgnLnNjcm9sbGVyJyk7XG4gICAgdGhpcy4kcGVvcGxlID0gJCgnLnBlb3BsZScpO1xuICAgIHRoaXMucGVvcGxlUm90YXRlWiA9IDA7XG4gICAgdGhpcy5wZW9wbGVSb3RhdGVEZWx0YSA9IDI1OyAvL+Wwj+eQg+a7muWKqOinkuW6plxuICAgIHRoaXMucGVvcGxlSGVpZ2h0ID0gMDtcbiAgICB0aGlzLnBlb3BsZVdpZHRoID0gMDtcbiAgICB0aGlzLl90ID0gMDtcbiAgICB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZID0gMDtcbiAgICB0aGlzLl9jdXJyZW50UGVvcGxlWSA9IDIwO1xuICAgIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA9IDA7XG4gICAgdGhpcy5fZmxvb3JTY3JvbGxlclkgPSAyMDA7XG4gICAgdGhpcy5fbWF4SnVtcERpc3RhbmNlID0gMjA7IC8v5bCP55CD6Lez5Yqo55qE5pyA5aSn6auY5bqmXG4gICAgdGhpcy5fY3VycmVudEp1bXBEaXN0YW5jZSA9IDA7XG4gICAgdGhpcy5fZnJhbWVJbmRleCA9IDA7XG4gICAgdGhpcy5fdjAgPSAwO1xuICAgIHRoaXMuY2hlY2tGbG9vckNvbmZpZygpO1xufTtcblxuR2FtZUNvbnRyb2xsZXIucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBHYW1lQ29udHJvbGxlcixcbiAgICBFdmVudDogWydnYW1lb3ZlcicsICdzdGFydCcsICdyZXJ1bicsICdzdG9wJywgJ3Njb3JldXBkYXRlJ10sXG4gICAgb246IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbikge1xuICAgICAgICBpZiAodGhpcy5FdmVudC5pbmRleE9mKGV2ZW50KSA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLm9uKGV2ZW50LCBmbik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmuLjmiI/nu5PmnZ9cbiAgICAgKi9cbiAgICBnYW1lb3ZlcjogZnVuY3Rpb24gZ2FtZW92ZXIoKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci50cmlnZ2VyKCdnYW1lb3ZlcicpO1xuICAgICAgICAgICAgJCgnI2dhbWUtY3QnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuZ2FtZS1vdmVyJykuc2hvdygpO1xuICAgICAgICB9LmJpbmQodGhpcyksIDIwMCk7XG4gICAgfSxcbiAgICBjaGVja0Zsb29yQ29uZmlnOiBmdW5jdGlvbiBjaGVja0Zsb29yQ29uZmlnKCkge1xuICAgICAgICB2YXIgcmFuZ2VBcnJheSA9IFswXTtcbiAgICAgICAgdmFyIHRvdGFsUmF0ZSA9IDA7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmZsb29yUmF0ZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbmZpZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIF9yYXRlID0gY29uZmlnW2ldLnJhdGU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIF9yYXRlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3JhdGUgdHlwZSBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxSYXRlICs9IF9yYXRlO1xuICAgICAgICAgICAgcmFuZ2VBcnJheS5wdXNoKHRvdGFsUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvdGFsUmF0ZSAhPT0gMTAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigncmF0ZSDliqDotbfmnaXliqHlv4XnrYnkuo4xMDAhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmxvb3JSYXRlQXJyYXkgPSByYW5nZUFycmF5O1xuICAgIH0sXG4gICAgZ2V0UmFuZG93Rmxvb3I6IGZ1bmN0aW9uIGdldFJhbmRvd0Zsb29yKHJhbmdlQXJyYXkpIHtcbiAgICAgICAgdmFyIGRpY2UgPSBNYXRoLnJhbmRvbSgpICogMTAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlQXJyYXkubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZGljZSA+PSByYW5nZUFycmF5W2ldICYmIGRpY2UgPCByYW5nZUFycmF5W2kgKyAxXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZsb29yUmF0ZVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5Yib5bu65qW85bGCXG4gICAgICovXG4gICAgY3JlYXRlRmxvb3JTcGFuOiBmdW5jdGlvbiBjcmVhdGVGbG9vclNwYW4oKSB7XG4gICAgICAgIHZhciBfdG9wID0gdGhpcy5fZmxvb3JTY3JvbGxlclkgKz0gdGhpcy5mbG9vckRlbHRhWSxcbiAgICAgICAgICAgIF9sZWZ0ID0gTWF0aC5yYW5kb20oKSAqICh0aGlzLmNhbnZhc1dpZHRoIC0gdGhpcy5mbG9vcldpZHRoKTtcbiAgICAgICAgdmFyIGZsb29yQ29uZmlnID0gdGhpcy5nZXRSYW5kb3dGbG9vcih0aGlzLl9mbG9vclJhdGVBcnJheSk7XG4gICAgICAgIHZhciBmbG9vckVsZW1lbnQgPSAnPGkgY2xhc3M9XCJmbG9vciAnICsgZmxvb3JDb25maWcubmFtZSArICdcIj48L2k+JztcblxuICAgICAgICAkKGZsb29yRWxlbWVudCkuY3NzKHtcbiAgICAgICAgICAgIHRvcDogX3RvcCxcbiAgICAgICAgICAgIGxlZnQ6IF9sZWZ0LFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuZmxvb3JXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5mbG9vckhlaWdodFxuICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLiRzY3JvbGxlcik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDnp7vpmaTmpbzlsYJcbiAgICAgKi9cbiAgICByZW1vdmVGbG9vclNhcG46IGZ1bmN0aW9uIHJlbW92ZUZsb29yU2FwbigpIHtcbiAgICAgICAgJCgnLmZsb29yJykuZXEoMCkucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuZmxvb3JTY29yZSsrO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmm7TmlLnooYBcbiAgICAgKi9cbiAgICB1cGRhdGVCbG9vZDogZnVuY3Rpb24gdXBkYXRlQmxvb2QoKSB7XG4gICAgICAgIHZhciAkYmxvb2RFbGUgPSAkKCcuYmxvb2QgaScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRibG9vZEVsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLmJsb29kKSB7XG4gICAgICAgICAgICAgICAgJGJsb29kRWxlLmVxKGkpLnJlbW92ZUNsYXNzKCdsb3NlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRibG9vZEVsZS5lcShpKS5hZGRDbGFzcygnbG9zZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDkv67mlLnliIbmlbBcbiAgICAgKi9cbiAgICB1cGRhdGVTY29yZTogZnVuY3Rpb24gdXBkYXRlU2NvcmUoKSB7XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci50cmlnZ2VyKCdzY29yZXVwZGF0ZScpO1xuICAgICAgICAkKCcudGV4dC1zY29yZScpLnRleHQodGhpcy5mbG9vclNjb3JlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOWkseWIhuaVsFxuICAgICAqL1xuICAgIGxvc2VCbG9vZDogZnVuY3Rpb24gbG9zZUJsb29kKCkge1xuICAgICAgICBpZiAodGhpcy5fX29uRmxvb3IpIHJldHVybjtcbiAgICAgICAgdGhpcy5ibG9vZCAtPSA0O1xuICAgICAgICAvL+S6uuWPmOe6olxuICAgICAgICB0aGlzLiRwZW9wbGUuYWRkQ2xhc3MoJ2RhbmdlcicpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJHBlb3BsZS5yZW1vdmVDbGFzcygnZGFuZ2VyJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMTAwMCk7XG5cbiAgICAgICAgLy/og4zlvbHpl6rng4FcbiAgICAgICAgJCgnI2dhbWUtY3QnKS5hZGRDbGFzcygnZGFuZ2VyJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI2dhbWUtY3QnKS5yZW1vdmVDbGFzcygnZGFuZ2VyJyk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgaWYgKHRoaXMuYmxvb2QgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5ibG9vZCA9IDA7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJsb29kKCk7XG4gICAgICAgICAgICB0aGlzLmdhbWVvdmVyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVCbG9vZCgpO1xuICAgIH0sXG4gICAgYWRkQmxvb2Q6IGZ1bmN0aW9uIGFkZEJsb29kKCkge1xuICAgICAgICAvL+W9k+S6uueJqeWcqOW5s+WPsOS4iuaXtu+8jOaIluiAheihgOmHj+Wkp+S6jjEy77yM5LiN6YeN5aSN5Yqg6KGAXG4gICAgICAgIGlmICh0aGlzLl9fb25GbG9vciB8fCB0aGlzLmJsb29kID49IDEyKSByZXR1cm47XG4gICAgICAgIHRoaXMuYmxvb2QgKz0gMTtcbiAgICAgICAgdGhpcy51cGRhdGVCbG9vZCgpO1xuICAgIH0sXG4gICAgZmxvb3JOb3JtYWw6IGZ1bmN0aW9uIGZsb29yTm9ybWFsKCkge1xuICAgICAgICB0aGlzLmFkZEJsb29kKCk7XG4gICAgfSxcbiAgICBmbG9vck5haWw6IGZ1bmN0aW9uIGZsb29yTmFpbCgpIHtcbiAgICAgICAgdGhpcy5sb3NlQmxvb2QoKTtcbiAgICB9LFxuICAgIGZsb29yV2VhazogZnVuY3Rpb24gZmxvb3JXZWFrKCRmbG9vckVsZSkge1xuICAgICAgICB0aGlzLmFkZEJsb29kKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGZsb29yRWxlLmFkZENsYXNzKCdvdmVyJyk7XG4gICAgICAgICAgICAkZmxvb3JFbGVbMF0uY3Jvc3MgPSB0cnVlO1xuICAgICAgICB9LCAyMDApO1xuICAgIH0sXG4gICAgZmxvb3JTY3JvbGw6IGZ1bmN0aW9uIGZsb29yU2Nyb2xsKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLmFkZEJsb29kKCk7XG4gICAgICAgIHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICB9LFxuICAgIGZsb29yU2Nyb2xsRW5kOiBmdW5jdGlvbiBmbG9vclNjcm9sbEVuZCgpIHtcbiAgICAgICAgdGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID0gbnVsbDtcbiAgICB9LFxuICAgIGZsb29yU3ByaW5nOiBmdW5jdGlvbiBmbG9vclNwcmluZygkZmxvb3JFbGUpIHtcbiAgICAgICAgdGhpcy5fXyRjdXJyZW50SnVtcEZsb29yID0gJGZsb29yRWxlO1xuICAgICAgICB0aGlzLmp1bXBTdGFydCgpO1xuICAgICAgICB0aGlzLmFkZEJsb29kKCk7XG4gICAgfSxcbiAgICBqdW1wU3RhcnQ6IGZ1bmN0aW9uIGp1bXBTdGFydCgpIHtcbiAgICAgICAgdGhpcy5fX2p1bXBNb2RlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fXyRjdXJyZW50SnVtcEZsb29yLmFkZENsYXNzKCd1cCcpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX18kY3VycmVudEp1bXBGbG9vci5yZW1vdmVDbGFzcygndXAnKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCAyMDApO1xuICAgIH0sXG4gICAganVtcEVuZDogZnVuY3Rpb24ganVtcEVuZChoaXRUb3ApIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fanVtcE1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGl0VG9wKSB7XG4gICAgICAgICAgICB0aGlzLl9fJGN1cnJlbnRKdW1wRmxvb3JbMF0uY3Jvc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8v6YeN572u6Lez6LeD6auY5bqmXG4gICAgICAgIHRoaXMuX2N1cnJlbnRKdW1wRGlzdGFuY2UgPSAwO1xuICAgICAgICAvL+ino+mZpOi3s+i3g1xuICAgICAgICB0aGlzLl9fanVtcE1vZGUgPSBmYWxzZTtcbiAgICB9LFxuICAgIHBlb3BsZTogZnVuY3Rpb24gcGVvcGxlKGZwcykge1xuICAgICAgICAvL+avj+W4p+a2iOiAl+aXtumXtCBtc1xuICAgICAgICB2YXIgZHQgPSAxIC8gZnBzO1xuICAgICAgICAvL+S6uueJqee6teWQkeavj+W4p+enu+WKqOi3neemuyBcbiAgICAgICAgdmFyIF9kZWx0YVBlb3BsZVkgPSB0aGlzLl92MCAqIGR0ICsgdGhpcy5ncmF2aXR5ICogZHQgKiBkdCAvIDI7XG4gICAgICAgIC8v5pu05paw5pe26Ze0IHQ9dCtkdDtcbiAgICAgICAgdGhpcy5fdCArPSBkdDtcbiAgICAgICAgLy8g5pu05paw6YCf5bqmIHY9YXRcbiAgICAgICAgdGhpcy5fdjAgPSB0aGlzLmdyYXZpdHkgKiB0aGlzLl90O1xuICAgICAgICAvL+WNt+i9tOe6teWQkeavj+W4p+enu+WKqOi3neemu1xuICAgICAgICB2YXIgX2RlbHRhWSA9IHRoaXMuc3BlZWQgLyBmcHM7XG4gICAgICAgIC8v5Lq654mp5qiq5ZCR5q+P5bin56e75Yqo6Led56a7XG4gICAgICAgIHZhciBfZGVsdGFQZW9wbGVWZXJ0aWNhbCA9IHRoaXMucGVvcGxlVmVydGljYWxTcGVlZCAvIGZwcztcbiAgICAgICAgLy8g57yT5a2YZmxvb3JcbiAgICAgICAgdmFyICRmbG9vciA9ICQoJy5mbG9vcicpO1xuICAgICAgICAvL+e8k+WtmG9mZnNldFxuICAgICAgICB2YXIgcGVvcGxlT2Zmc2V0ID0gdGhpcy4kcGVvcGxlLm9mZnNldCgpO1xuXG4gICAgICAgIC8v5Lq654mp5o6J6JC95bGP5bmV5LiL5pa577yM5ri45oiP57uT5p2fXG4gICAgICAgIGlmIChwZW9wbGVPZmZzZXQudG9wID4gdGhpcy5jYW52YXNIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZW92ZXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyDnorDmkp7mo4DmtYtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmxvb3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8v57yT5a2Yb2Zmc2V0XG4gICAgICAgICAgICB2YXIgZmxvb3JPZmZzZXQgPSAkZmxvb3IuZXEoaSkub2Zmc2V0KCk7XG4gICAgICAgICAgICAvL+S6uueJqeS4jualvOair+e6teWQkei3neemu1xuICAgICAgICAgICAgdmFyIGRpc3RhbmNlR2FwID0gTWF0aC5hYnMocGVvcGxlT2Zmc2V0LnRvcCArIHRoaXMucGVvcGxlSGVpZ2h0IC0gZmxvb3JPZmZzZXQudG9wKTtcbiAgICAgICAgICAgIC8vIOW9k+S6uueJqeaSnuWIsOmhtumDqO+8jOaOieihgCvmjonokL0r5omT5pat6Lez6LeDXG4gICAgICAgICAgICBpZiAocGVvcGxlT2Zmc2V0LnRvcCA8PSBfZGVsdGFQZW9wbGVZICsgX2RlbHRhWSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3QgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX19vbkZsb29yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wRW5kKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9zZUJsb29kKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDot7Pot4PmqKHlvI/kuI3ov5vlhaXmo4DmtYtcbiAgICAgICAgICAgIGlmICghdGhpcy5fX2p1bXBNb2RlICYmXG4gICAgICAgICAgICAvL+WFg+e0oOS4jeWPr+ebtOaOpeepv+i/h1xuICAgICAgICAgICAgISRmbG9vci5lcShpKVswXS5jcm9zcyAmJlxuICAgICAgICAgICAgLy8g5Lq654mp5LiO5qW85qKv57q15ZCR6Led56a75Zyo5LiA5bin56e75Yqo6Led56a75LmL5YaFXG4gICAgICAgICAgICBkaXN0YW5jZUdhcCA8PSBfZGVsdGFQZW9wbGVZICsgX2RlbHRhWSAmJlxuICAgICAgICAgICAgLy8g5Lq654mp5qiq5ZCR6Led56a75LiN6LaF6L+H5qW85qKv5pyA5bemXG4gICAgICAgICAgICBwZW9wbGVPZmZzZXQubGVmdCA+IGZsb29yT2Zmc2V0LmxlZnQgLSB0aGlzLnBlb3BsZVdpZHRoICYmXG4gICAgICAgICAgICAvL+S6uueJqeaoquWQkei3neemu+S4jei1sOi/h+alvOair+acgOWPs1xuICAgICAgICAgICAgcGVvcGxlT2Zmc2V0LmxlZnQgPCBmbG9vck9mZnNldC5sZWZ0ICsgdGhpcy5mbG9vcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgLy8g5Lq654mp5LiO5qW85qKv5YGP5beu5L+u5q2jXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVkgPSBmbG9vck9mZnNldC50b3AgLSB0aGlzLnBlb3BsZUhlaWdodDtcbiAgICAgICAgICAgICAgICAvLyDmlr3liqDlkITnsbvmpbzmoq/nibnmrorlsZ7mgKdcbiAgICAgICAgICAgICAgICBpZiAoJGZsb29yLmVxKGkpLmhhc0NsYXNzKCdub3JtYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb29yTm9ybWFsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkZmxvb3IuZXEoaSkuaGFzQ2xhc3MoJ25haWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb29yTmFpbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJGZsb29yLmVxKGkpLmhhc0NsYXNzKCdzcHJpbmcnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb29yU3ByaW5nKCRmbG9vci5lcShpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkZmxvb3IuZXEoaSkuaGFzQ2xhc3MoJ3dlYWsnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb29yV2VhaygkZmxvb3IuZXEoaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJGZsb29yLmVxKGkpLmhhc0NsYXNzKCdzY3JvbGwtbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvb3JTY3JvbGwoJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRmbG9vci5lcShpKS5oYXNDbGFzcygnc2Nyb2xsLXJpZ2h0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9vclNjcm9sbCgncmlnaHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fdCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5fX29uRmxvb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/lvZPlvqrnjq/miafooYzlrozmr5XvvIzku43nhLbmsqHmnInlj5HnjrDnorDmkp7vvIzliJnooajmmI7kurrniankuI3lnKjlubPlj7DkuIpcbiAgICAgICAgICAgIGlmIChpID09PSAkZmxvb3IubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX19vbkZsb29yID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL+S6uueJqeWQkeS4iui3s+i1t1xuICAgICAgICBpZiAodGhpcy5fX2p1bXBNb2RlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudEp1bXBEaXN0YW5jZSA+PSB0aGlzLl9tYXhKdW1wRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmp1bXBFbmQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudEp1bXBEaXN0YW5jZSArPSBfZGVsdGFQZW9wbGVZO1xuICAgICAgICAgICAgICAgIC8vIOWQkeS4iui3s+i1t+aViOaenOimgemineWkluWKoOS4il9kZWx0YVnvvIzku6XljLnphY3ljbfovbTov5DliqjnirbmgIFcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50UGVvcGxlWSAtPSBfZGVsdGFQZW9wbGVZICsgX2RlbHRhWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOS6uueJqeWQkeS4i+WdoOiQvSvlj5bmtojmpbzmoq/lt6blj7PliqDpgJ/nirbmgIFcbiAgICAgICAgaWYgKCF0aGlzLl9fb25GbG9vciAmJiAhdGhpcy5fX2p1bXBNb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmZsb29yU2Nyb2xsRW5kKCk7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50UGVvcGxlWSArPSBfZGVsdGFQZW9wbGVZO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qiq5ZCR6L+Q5Yqo6aKE5aSE55CGXG4gICAgICAgIHZhciBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbCA9IF9kZWx0YVBlb3BsZVZlcnRpY2FsO1xuICAgICAgICAvL+WkhOeQhuS6uueJqeWQkeW3pui/kOWKqFxuICAgICAgICBpZiAodGhpcy5fcGVvcGxlR29MZWZ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbCAqPSAxLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgKj0gMS41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgLT0gX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8g5aSE55CG5Lq654mp5ZCR5Y+z6L+Q5YqoXG4gICAgICAgIGlmICh0aGlzLl9wZW9wbGVHb1JpZ2h0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICBfX3RlbXBfZGVsdGFQZW9wbGVWZXJ0aWNhbCAqPSAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fX2Zsb29yU2Nyb2xsRGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgKj0gMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA8IHRoaXMuY2FudmFzV2lkdGggLSB0aGlzLnBlb3BsZVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICs9IF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOWkhOeQhuS6uueJqeWcqOa7muWKqOalvOair+S4iueahOiHquWKqOi/kOWKqFxuICAgICAgICBpZiAoIXRoaXMuX3Blb3BsZUdvUmlnaHQgJiYgIXRoaXMuX3Blb3BsZUdvTGVmdCkge1xuICAgICAgICAgICAgX190ZW1wX2RlbHRhUGVvcGxlVmVydGljYWwgKj0gMC41O1xuICAgICAgICAgICAgaWYgKHRoaXMuX19mbG9vclNjcm9sbERpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsIC09IF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9fZmxvb3JTY3JvbGxEaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsIDwgdGhpcy5jYW52YXNXaWR0aCAtIHRoaXMucGVvcGxlV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICs9IF9fdGVtcF9kZWx0YVBlb3BsZVZlcnRpY2FsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL+abtOaWsOS6uuinhuWbvlxuICAgICAgICB0aGlzLnBlb3BsZVVwZGF0ZVZpZXcoKTtcbiAgICB9LFxuICAgIC8v5pu05paw5Y236L205L2N572uXG4gICAgZmxvb3JVcGRhdGVWaWV3OiBmdW5jdGlvbiBmbG9vclVwZGF0ZVZpZXcoKSB7XG4gICAgICAgIGlmIChNb2Rlcm5penIuY3NzdHJhbnNmb3JtczNkKSB7XG4gICAgICAgICAgICB0aGlzLiRzY3JvbGxlci5jc3Moe1xuICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgwLCcgKyB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4LDApJyxcbiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgwLCcgKyB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4LDApJyxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zZm9ybTNkKDAsJyArIHRoaXMuX2N1cnJlbnRTY3JvbGxlclkgKyAncHgsMCknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChNb2Rlcm5penIuY3NzdHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgdGhpcy4kc2Nyb2xsZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgnICsgdGhpcy5fY3VycmVudFNjcm9sbGVyWSArICdweCknLFxuICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHRoaXMuX2N1cnJlbnRTY3JvbGxlclkgKyAncHgpJyxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHRoaXMuX2N1cnJlbnRTY3JvbGxlclkgKyAncHgpJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRzY3JvbGxlci5jc3Moe1xuICAgICAgICAgICAgICAgICd0b3AnOiB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHBlb3BsZVVwZGF0ZVZpZXc6IGZ1bmN0aW9uIHBlb3BsZVVwZGF0ZVZpZXcoKSB7XG4gICAgICAgIGlmICh0aGlzLl9fb25GbG9vcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Blb3BsZUdvTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGVvcGxlUm90YXRlWiAtPSB0aGlzLnBlb3BsZVJvdGF0ZURlbHRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3Blb3BsZUdvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlb3BsZVJvdGF0ZVogKz0gdGhpcy5wZW9wbGVSb3RhdGVEZWx0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoTW9kZXJuaXpyLmNzc3RyYW5zZm9ybXMzZCkge1xuICAgICAgICAgICAgdGhpcy4kcGVvcGxlLmNzcyh7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zZm9ybTNkKCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgKyAncHgsJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVZICsgJ3B4LDApJyxcbiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgnICsgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICsgJ3B4LCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCwwKScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2Zvcm0zZCgnICsgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsICsgJ3B4LCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlWSArICdweCwwKSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKE1vZGVybml6ci5jc3N0cmFuc2Zvcm1zKSB7XG4gICAgICAgICAgICB0aGlzLiRwZW9wbGUuY3NzKHtcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgKyAncHgsJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVZICsgJ3B4KScsXG4gICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCcgKyB0aGlzLl9jdXJyZW50UGVvcGxlVmVydGljYWwgKyAncHgsJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVZICsgJ3B4KScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoJyArIHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArICdweCwnICsgdGhpcy5fY3VycmVudFBlb3BsZVkgKyAncHgpJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRwZW9wbGUuY3NzKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHRoaXMuX2N1cnJlbnRQZW9wbGVWZXJ0aWNhbCArICdweCcsXG4gICAgICAgICAgICAgICAgJ3RvcCc6IHRoaXMuX2N1cnJlbnRQZW9wbGVZICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHBlb3BsZVVzZXJDb250cm9sbGVyOiBmdW5jdGlvbiBwZW9wbGVVc2VyQ29udHJvbGxlcigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29SaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvTGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29MZWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkua2V5dXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29SaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvTGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmNvbnRyb2xsZXIgLmxlZnQtY3QnKS5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLl9wZW9wbGVHb0xlZnQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KS5vbigndG91bmNoZW5kJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29MZWZ0ID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5jb250cm9sbGVyIC5yaWdodC1jdCcpLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29SaWdodCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5fcGVvcGxlR29MZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgX3RoaXMuX3Blb3BsZUdvUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjb3JlOiBmdW5jdGlvbiBjb3JlKGZwcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxuICAgICAgICAgICAgX2RlbHRhWSA9IHRoaXMuc3BlZWQgLyBmcHMsXG4gICAgICAgICAgICAvL+WNt+i9tOe6teWQkeavj+W4p+enu+WKqOi3neemu1xuICAgICAgICAkZmxvb3IgPSAkKCcuZmxvb3InKTtcblxuICAgICAgICAvL+iuoeeul+WNt+i9tOS9jee9rlxuICAgICAgICB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZIC09IF9kZWx0YVk7XG5cbiAgICAgICAgLy/lvZPljbfovbTotoXlh7rkuIDlrprplb/luqbkuYvlkI7vvIzov5vooYzkvY3nva5yZXNldO+8jOe8qeWHj+mVv+W6pu+8jOmYsuatokNyYXNo546w6LGhXG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U2Nyb2xsZXJZIDw9IC10aGlzLmNhbnZhc0hlaWdodCAqIDIpIHtcbiAgICAgICAgICAgIC8v5bCG5Y236L205rua5Yqo6auY5bqm5YeP5bCP5LiA5bGPXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2Nyb2xsZXJZICs9IHRoaXMuY2FudmFzSGVpZ2h0O1xuICAgICAgICAgICAgLy/lsIbmpbzmoq/lgY/np7vpq5jluqblh4/lsJHkuIDlsY9cbiAgICAgICAgICAgIHRoaXMuX2Zsb29yU2Nyb2xsZXJZIC09IHRoaXMuY2FudmFzSGVpZ2h0O1xuICAgICAgICAgICAgLy/ph43nva7lho3mnInmpbzmoq/kvY3nva5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGZsb29yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgJGZsb29yLmVxKGkpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogcGFyc2VJbnQoJCgnLmZsb29yJykuZXEoaSkuY3NzKCd0b3AnKSkgLSB0aGlzLmNhbnZhc0hlaWdodFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8v5pu05paw5Y236L205L2N572uXG4gICAgICAgIHRoaXMuZmxvb3JVcGRhdGVWaWV3KCk7XG5cbiAgICAgICAgLy/mr4/kuKrlj7DpmLbnp7vlh7rop4bph47liJnmuIXpmaTlj7DpmLbvvIzlubbkuJTlnKjlupXpg6jlop7liqDkuIDkuKrmlrDnmoTlj7DpmLZcbiAgICAgICAgaWYgKCRmbG9vci5lcSgwKS5vZmZzZXQoKS50b3AgPD0gLTIwKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUZsb29yU3BhbigpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVGbG9vclNhcG4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v6LCD55So5Lq654mp5riy5p+TXG4gICAgICAgIHRoaXMucGVvcGxlKGZwcyk7XG4gICAgICAgIC8v6LW35p2l6LaKaGlnaFxuICAgICAgICBpZiAodGhpcy5zcGVlZCA8PSB0aGlzLm1heFNwZWVkKSB7XG4gICAgICAgICAgICB0aGlzLnNwZWVkICs9IDAuMTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcnVuOiBmdW5jdGlvbiBydW4oZnBzKSB7XG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQW5pbWF0aW9uIGhhcyBhcmVhZHkgaW4gcHJvY2VzcyxwbGVhc2UgZG8gbm90IHJ1biBhZ2FpbiEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ZwcyA9IGZwcyA9IGZwcyB8fCA2MDtcbiAgICAgICAgdmFyIGxvb3B0aW1lID0gMTAwMCAvIGZwcztcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgcnVuQW5pbWF0aW9uID0gZnVuY3Rpb24gcnVuQW5pbWF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb3JlKGZwcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0aW9uID0gcnVuQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICB9LCBsb29wdGltZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbiA9IHJ1bkFuaW1hdGlvbigpO1xuICAgIH0sXG4gICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYW5pbWF0aW9uKTsgLy/mmoLlgZzliqjnlLtcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci50cmlnZ2VyKCdzdG9wJyk7XG4gICAgfSxcbiAgICByZVJ1bjogZnVuY3Rpb24gcmVSdW4oKSB7XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci50cmlnZ2VyKCdyZXJ1bicpO1xuICAgICAgICAvL+mHjee9ruWPguaVsFxuICAgICAgICAkLmV4dGVuZCh0aGlzLCB0aGlzLl9fcGFyYW1CYWNrdXApO1xuICAgICAgICAvL+WIoOmZpOaOieWGjeaciealvOair1xuICAgICAgICAkKCcuZmxvb3InKS5yZW1vdmUoKTtcbiAgICAgICAgLy/ph43mlrDliJ3lp4vljJZcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH0sXG4gICAgYmFja3VwOiBmdW5jdGlvbiBiYWNrdXAoKSB7XG4gICAgICAgIC8vIOWkh+S7veWvneiuvue9ruWPguaVsO+8jOeUqOS6jua4uOaIj3Jlc2V0XG4gICAgICAgIHRoaXMuX19wYXJhbUJhY2t1cCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHRoaXNbaV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BhcmFtQmFja3VwW2ldID0gdGhpc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxuICAgICAgICAgICAgZmxvb3JMb29wID0gMDtcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLnRyaWdnZXIoJ3N0YXJ0Jyk7XG4gICAgICAgIHRoaXMuY2FudmFzV2lkdGggPSB0aGlzLiRjYW52YXMud2lkdGgoKTtcbiAgICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSB0aGlzLiRjYW52YXMuaGVpZ2h0KCk7XG4gICAgICAgIHRoaXMuZmxvb3JEZWx0YVkgPSB0aGlzLmNhbnZhc0hlaWdodCAvIDExO1xuICAgICAgICB0aGlzLmZsb29yV2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoIC8gNTtcbiAgICAgICAgdGhpcy5mbG9vckhlaWdodCA9IHRoaXMuZmxvb3JXaWR0aCAvIDk7XG4gICAgICAgIHRoaXMucGVvcGxlSGVpZ2h0ID0gcGFyc2VJbnQodGhpcy4kcGVvcGxlLmNzcygnaGVpZ2h0JykpO1xuICAgICAgICB0aGlzLnBlb3BsZVdpZHRoID0gcGFyc2VJbnQodGhpcy4kcGVvcGxlLmNzcygnd2lkdGgnKSk7XG5cbiAgICAgICAgdGhpcy5fY3VycmVudFBlb3BsZVZlcnRpY2FsID0gdGhpcy5jYW52YXNXaWR0aCAvIDIgKyB0aGlzLnBlb3BsZVdpZHRoIC8gMjtcbiAgICAgICAgdGhpcy5iYWNrdXAoKTtcbiAgICAgICAgLy/liJ3lp4vljJblj7DpmLZcbiAgICAgICAgd2hpbGUgKGZsb29yTG9vcCsrIDwgMTMpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRmxvb3JTcGFuKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy/liJ3lp4vljJbku7vliqHmjqfliLZcbiAgICAgICAgdGhpcy5wZW9wbGVVc2VyQ29udHJvbGxlcigpO1xuICAgICAgICAvL+mmluasoeabtOaWsOS6uueJqeinhuWbvlxuICAgICAgICB0aGlzLnBlb3BsZVVwZGF0ZVZpZXcoKTtcbiAgICAgICAgLy/pppbmrKHmm7TmlrDkurrnianooYDph49cbiAgICAgICAgdGhpcy51cGRhdGVCbG9vZCgpO1xuICAgICAgICAvL+mmluasoeabtOaWsOalvOWxguaVsFxuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKCk7XG4gICAgICAgIC8v5Lul5q+P56eSNjDluKfmiafooYzmuLjmiI/liqjnlLtcbiAgICAgICAgdGhpcy5ydW4odGhpcy5mcHMpO1xuICAgIH1cblxufTtcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVDb250cm9sbGVyOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///10\\n\")}});","extractedComments":[]}